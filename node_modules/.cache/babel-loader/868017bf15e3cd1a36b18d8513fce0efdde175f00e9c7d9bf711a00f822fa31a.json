{"ast":null,"code":"var _jsxFileName = \"/home/devbox/project/src/pages/workspace-page.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Button } from '../components/ui/button';\nimport AIChat from '../components/features/ai-chat/ai-chat';\nimport CommandPalette from '../components/features/command/command-palette';\nimport ProjectTree from '../components/features/tree-growth/project-tree';\nimport { usePlanStore } from '../lib/store';\nimport { toast } from 'sonner';\n\n// ä»ŽURLä¸­èŽ·å–å‚æ•°çš„å·¥å…·å‡½æ•°\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getQueryParams = () => {\n  const params = new URLSearchParams(window.location.search);\n  const plan = params.get('plan');\n  return {\n    plan: plan ? decodeURIComponent(plan) : null\n  };\n};\n\n// æ–‡ä»¶å†…å®¹ç±»åž‹å®šä¹‰\n\n// å·¥ä½œåŒºæ ‡ç­¾ç±»åž‹\n\nconst WorkspacePage = () => {\n  _s();\n  const location = useLocation();\n  const {\n    addPlan\n  } = usePlanStore(); // ä½¿ç”¨è®¡åˆ’å­˜å‚¨\n  const [activeTab, setActiveTab] = useState('tree'); // é»˜è®¤æ˜¾ç¤ºæ ‘é¡µé¢\n  const [isLeftSidebarCollapsed, setIsLeftSidebarCollapsed] = useState(false);\n  const [leftSidebarWidth, setLeftSidebarWidth] = useState(256); // Default width of 64 in rem (w-64)\n  const [isLeftResizing, setIsLeftResizing] = useState(false);\n  const leftResizingRef = useRef(null);\n  const [isRightSidebarCollapsed, setIsRightSidebarCollapsed] = useState(false);\n  const [rightSidebarWidth, setRightSidebarWidth] = useState(384); // Default width of 96 in rem (w-96)\n  const [isResizing, setIsResizing] = useState(false);\n  const resizingRef = useRef(null);\n  const [isCommandPaletteOpen, setIsCommandPaletteOpen] = useState(false);\n  const [openFiles, setOpenFiles] = useState(['workspace.txt']);\n  const [currentFile, setCurrentFile] = useState('workspace.txt');\n  const [planTitle, setPlanTitle] = useState(null);\n\n  // æ ‘çš„è¿›åº¦çŠ¶æ€\n  const [treeProgress, setTreeProgress] = useState(5); // é»˜è®¤5%è¿›åº¦\n  const [tasksCompleted, setTasksCompleted] = useState(1);\n  const [totalTasks, setTotalTasks] = useState(10);\n\n  // ç”Ÿæˆé»˜è®¤çš„æ–‡ä»¶å†…å®¹\n  const generateDefaultFileContents = plan => {\n    const defaultContents = {\n      'workspace.txt': `# ä»»åŠ¡è®¡åˆ’ AI å·¥ä½œåŒº\n\nè¿™æ˜¯ä¸€ä¸ªé›†æˆå¼AIå·¥ä½œçŽ¯å¢ƒï¼Œä½ å¯ä»¥ï¼š\n- å‘AIæå‡ºå…³äºŽä»»åŠ¡çš„é—®é¢˜\n- èŽ·å–å…³äºŽä»»åŠ¡æ‹†è§£çš„å»ºè®®\n- ä½¿ç”¨AIååŠ©ç®¡ç†å’Œä¼˜åŒ–ä½ çš„ä»»åŠ¡è®¡åˆ’\n\n## ä½¿ç”¨æ–¹æ³•\n\n1. åœ¨å³ä¾§AIåŠ©æ‰‹ä¸­æé—®\n2. ä½¿ç”¨âŒ˜Kæ‰“å¼€å‘½ä»¤é¢æ¿\n3. ä½¿ç”¨@ç¬¦å·å¼•ç”¨æ–‡ä»¶å’Œèµ„æº`,\n      'project.json': `{\n  \"name\": \"ä»»åŠ¡è®¡åˆ’\",\n  \"version\": \"1.0.0\",\n  \"description\": \"çŽ°ä»£åŒ–çš„ä»»åŠ¡ç®¡ç†åº”ç”¨\",\n  \"framework\": \"React\",\n  \"components\": {\n    \"plans\": \"src/components/features/plan-tree/plan-tree.tsx\",\n    \"workspace\": \"src/pages/workspace-page.tsx\",\n    \"dashboard\": \"src/pages/dashboard-page.tsx\"\n  }\n}`\n    };\n\n    // å¦‚æžœæœ‰è®¡åˆ’æ ‡é¢˜ï¼Œåˆ™æ·»åŠ è®¡åˆ’ç›¸å…³æ–‡ä»¶\n    if (plan) {\n      defaultContents['plan-overview.md'] = `# ${plan}\n\n## è®¡åˆ’æ¦‚è¿°\nè¿™æ˜¯å…³äºŽ\"${plan}\"çš„ä»»åŠ¡è®¡åˆ’ã€‚\n\n## ç›®æ ‡\n- å®Œæˆ\"${plan}\"ç›¸å…³çš„æ‰€æœ‰å¿…è¦ä»»åŠ¡\n- æŒ‰æ—¶é«˜è´¨é‡åœ°äº¤ä»˜æˆæžœ\n- ä¿æŒè¿›åº¦å¯è§†åŒ–å’Œå¯è¿½è¸ª\n\n## æ—¶é—´çº¿\n- å¼€å§‹æ—¶é—´: ${new Date().toLocaleDateString()}\n- é¢„è®¡å®Œæˆ: å¾…å®š\n`;\n      defaultContents['tasks.md'] = `# ${plan} - ä»»åŠ¡æ¸…å•\n\n## å¾…å®Œæˆä»»åŠ¡\n- [ ] ä»»åŠ¡1: å®šä¹‰\"${plan}\"çš„å…·ä½“ç›®æ ‡å’ŒèŒƒå›´\n- [ ] ä»»åŠ¡2: åˆ†è§£\"${plan}\"ä¸ºå¯æ‰§è¡Œçš„å°æ­¥éª¤\n- [ ] ä»»åŠ¡3: ä¸ºæ¯ä¸ªæ­¥éª¤è®¾å®šå®Œæˆæ ‡å‡†\n\n## å·²å®Œæˆä»»åŠ¡\n- [x] åˆ›å»º\"${plan}\"è®¡åˆ’\n`;\n    }\n    return defaultContents;\n  };\n\n  // èŽ·å–è®¡åˆ’ä¿¡æ¯å¹¶åˆå§‹åŒ–æ–‡ä»¶å†…å®¹\n  useEffect(() => {\n    const {\n      plan\n    } = getQueryParams();\n    if (plan) {\n      setPlanTitle(plan);\n      const newFileContents = generateDefaultFileContents(plan);\n      setFileContents(newFileContents);\n\n      // æ‰“å¼€è®¡åˆ’ç›¸å…³æ–‡ä»¶\n      const planFiles = ['plan-overview.md', 'tasks.md'];\n      setOpenFiles(prevFiles => ['plan-overview.md', ...prevFiles.filter(file => !planFiles.includes(file))]);\n      setCurrentFile('plan-overview.md');\n\n      // æ‰“å¼€AIå¯¹è¯æ¡†\n      setIsRightSidebarCollapsed(false);\n\n      // é»˜è®¤è®¾ç½®é¡¹ç›®æ€»ä»»åŠ¡æ•°\n      setTotalTasks(10);\n\n      // å°†è®¡åˆ’ä¿å­˜åˆ°è®¡åˆ’å­˜å‚¨ä¸­\n      const createPlanInStore = async () => {\n        try {\n          // åˆ›å»ºè®¡åˆ’å¯¹è±¡\n          const newPlan = {\n            title: plan,\n            description: `è¿™æ˜¯å…³äºŽ\"${plan}\"çš„ä»»åŠ¡è®¡åˆ’ã€‚`,\n            progress: 5,\n            // åˆå§‹è¿›åº¦5%\n            status: 'ongoing'\n          };\n\n          // æ·»åŠ åˆ°è®¡åˆ’å­˜å‚¨\n          await addPlan(newPlan);\n          toast.success(`è®¡åˆ’\"${plan}\"å·²åˆ›å»ºå¹¶ä¿å­˜`);\n        } catch (error) {\n          console.error('ä¿å­˜è®¡åˆ’å¤±è´¥:', error);\n          toast.error('ä¿å­˜è®¡åˆ’å¤±è´¥ï¼Œä½†æ‚¨ä»å¯ä»¥åœ¨å·¥ä½œåŒºä¸­å·¥ä½œ');\n        }\n      };\n      createPlanInStore();\n    } else {\n      setFileContents(generateDefaultFileContents(null));\n    }\n  }, [location.search, addPlan]);\n  const [fileContents, setFileContents] = useState(generateDefaultFileContents(null));\n\n  // ç”ŸæˆAIåˆå§‹åŒ–æ¶ˆæ¯\n  const generateInitialMessages = () => {\n    const defaultMessage = {\n      id: '1',\n      role: 'system',\n      content: 'æ‚¨å¥½ï¼æˆ‘æ˜¯AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿæ‚¨å¯ä»¥ä½¿ç”¨@å¼•ç”¨æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åˆ‡æ¢æ™ºèƒ½ä½“æ¨¡å¼å’Œå¯¹è¯æ¨¡å¼ï¼Œæˆ–è€…é€‰æ‹©ä¸åŒçš„AIæ¨¡åž‹ã€‚',\n      timestamp: new Date()\n    };\n\n    // å¦‚æžœæœ‰è®¡åˆ’æ ‡é¢˜ï¼Œæ·»åŠ è®¡åˆ’ç›¸å…³çš„æ¬¢è¿Žæ¶ˆæ¯\n    if (planTitle) {\n      return [defaultMessage, {\n        id: '2',\n        role: 'assistant',\n        content: `æ‚¨å¥½ï¼æˆ‘çœ‹åˆ°æ‚¨æ­£åœ¨åˆ›å»º\"${planTitle}\"çš„ä»»åŠ¡è®¡åˆ’ã€‚\n\næˆ‘å·²ç»ä¸ºæ‚¨åˆå§‹åŒ–äº†ä¸¤ä¸ªæ–‡ä»¶ï¼š\n1. **plan-overview.md** - åŒ…å«è®¡åˆ’æ¦‚è¿°å’Œç›®æ ‡\n2. **tasks.md** - åŒ…å«å¾…å®Œæˆå’Œå·²å®Œæˆçš„ä»»åŠ¡æ¸…å•\n\næ‚¨éœ€è¦æˆ‘å¸®æ‚¨åšä»€ä¹ˆï¼Ÿä¾‹å¦‚ï¼š\n- å¸®æ‚¨æ‹†è§£\"${planTitle}\"ä»»åŠ¡ä¸ºæ›´å°çš„æ­¥éª¤\n- åˆ¶å®šå®Œæˆ\"${planTitle}\"çš„æ—¶é—´çº¿\n- æä¾›å…³äºŽ\"${planTitle}\"çš„æœ€ä½³å®žè·µå»ºè®®`,\n        timestamp: new Date()\n      }];\n    }\n    return [defaultMessage];\n  };\n\n  // å¤„ç†AIæ¶ˆæ¯\n  const handleSendMessage = async (message, references) => {\n    // æ£€æŸ¥æ˜¯å¦æ˜¯å®Œæˆä»»åŠ¡çš„æ¶ˆæ¯\n    const taskCompleteRegex = /(å®Œæˆ|å®Œæˆäº†|å·²å®Œæˆ|æ ‡è®°å®Œæˆ|å·²å®Œæˆäº†|å®Œæˆä»»åŠ¡)\\s*([\\S\\s]*?)(ä»»åŠ¡|å­ä»»åŠ¡|å·¥ä½œ|äº‹é¡¹)/i;\n    const isTaskComplete = taskCompleteRegex.test(message);\n\n    // å¦‚æžœæ˜¯å®Œæˆä»»åŠ¡çš„æ¶ˆæ¯ï¼Œæ›´æ–°æ ‘çš„è¿›åº¦\n    if (isTaskComplete) {\n      // æå–ä»»åŠ¡åç§°\n      const match = message.match(taskCompleteRegex);\n      const taskName = match && match[2] ? match[2].trim() : 'ä¸€ä¸ª';\n\n      // æ›´æ–°è¿›åº¦\n      setTasksCompleted(prev => Math.min(prev + 1, totalTasks));\n      const newProgress = Math.min(Math.round((tasksCompleted + 1) / totalTasks * 100), 100);\n      setTreeProgress(newProgress);\n\n      // æ›´æ–°ä»»åŠ¡æ–‡ä»¶å†…å®¹\n      if (fileContents['tasks.md']) {\n        const tasksMd = fileContents['tasks.md'];\n        // æŸ¥æ‰¾å¾…å®Œæˆä»»åŠ¡åˆ—è¡¨ä¸­çš„ä»»åŠ¡ï¼Œå¹¶å°†å…¶ç§»åŠ¨åˆ°å·²å®Œæˆä»»åŠ¡åˆ—è¡¨\n        const updatedTasksMd = tasksMd.replace(/- \\[ \\] (.*)/, (match, p1) => {\n          if (p1.includes(taskName) || taskName === 'ä¸€ä¸ª') {\n            return `- [x] ${p1}`;\n          }\n          return match;\n        });\n        setFileContents(prev => ({\n          ...prev,\n          'tasks.md': updatedTasksMd\n        }));\n      }\n\n      // åœ¨æ ‘å¢žé•¿æ—¶æ˜¾ç¤ºæç¤º\n      toast.success(`ðŸŒ± ä»»åŠ¡\"${taskName}\"å·²å®Œæˆï¼æ ‘æˆé•¿äº†ä¸€ç‚¹ï¼`, {\n        duration: 3000,\n        position: 'top-center'\n      });\n    }\n\n    // æ¨¡æ‹ŸAIå“åº”\n    return new Promise(resolve => {\n      setTimeout(() => {\n        let response = '';\n\n        // å¦‚æžœæ˜¯å®Œæˆä»»åŠ¡çš„æ¶ˆæ¯ï¼Œæä¾›ç‰¹å®šçš„å“åº”\n        if (isTaskComplete) {\n          response = `å¤ªæ£’äº†ï¼æˆ‘å·²å°†æ­¤ä»»åŠ¡æ ‡è®°ä¸ºå·²å®Œæˆã€‚\n\næ‚¨çš„é¡¹ç›®è¿›åº¦æ ‘ä¹Ÿå·²ç»æˆé•¿äº†ä¸€ç‚¹ ðŸŒ±\n\nå½“å‰è¿›åº¦ï¼š${treeProgress}%ï¼Œå·²å®Œæˆ ${tasksCompleted}/${totalTasks} ä¸ªä»»åŠ¡ã€‚\n\n${treeProgress >= 100 ? 'æ­å–œæ‚¨å®Œæˆäº†æ‰€æœ‰ä»»åŠ¡ï¼ðŸŽ‰' : 'ç»§ç»­åŠªåŠ›ï¼Œæ‚¨æ­£åœ¨å–å¾—è‰¯å¥½çš„è¿›å±•ï¼'}\n\næœ‰ä»€ä¹ˆå…¶ä»–æˆ‘å¯ä»¥å¸®æ‚¨çš„å—ï¼Ÿ`;\n        }\n        // æ ¹æ®æ¶ˆæ¯å†…å®¹å’Œè®¡åˆ’æ ‡é¢˜ç”Ÿæˆå“åº”\n        else if (planTitle) {\n          if (message.toLowerCase().includes('æ‹†è§£') || message.toLowerCase().includes('æ­¥éª¤')) {\n            response = `æˆ‘å¯ä»¥å¸®ä½ æ‹†è§£\"${planTitle}\"ä»»åŠ¡ã€‚ä¸€ä¸ªå¥½çš„ä»»åŠ¡æ‹†è§£åº”è¯¥åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š\n\n1. æ˜Žç¡®\"${planTitle}\"çš„å…·ä½“ç›®æ ‡å’ŒéªŒæ”¶æ ‡å‡†\n2. å°†\"${planTitle}\"åˆ†è§£ä¸º3-5ä¸ªä¸»è¦é˜¶æ®µ\n3. åœ¨æ¯ä¸ªé˜¶æ®µå†…ï¼Œç¡®å®šå…·ä½“çš„å¯æ‰§è¡Œä»»åŠ¡\n4. ä¼°è®¡æ¯ä¸ªä»»åŠ¡çš„æ—¶é—´å’Œèµ„æºéœ€æ±‚\n5. ç¡®å®šä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»\n6. è®¾ç½®æ£€æŸ¥ç‚¹å’Œé‡Œç¨‹ç¢‘\n\næˆ‘å·²ç»åœ¨tasks.mdæ–‡ä»¶ä¸­åˆ›å»ºäº†åˆå§‹ä»»åŠ¡åˆ—è¡¨ï¼Œæ‚¨å¯ä»¥æ ¹æ®ä¸Šè¿°æ­¥éª¤è¿›ä¸€æ­¥ç»†åŒ–ä»»åŠ¡ã€‚æ‚¨æƒ³è¦æˆ‘å¸®æ‚¨è¯¦ç»†æ‹†è§£å“ªä¸ªæ–¹é¢çš„ä»»åŠ¡ï¼Ÿ`;\n          } else if (message.toLowerCase().includes('æ—¶é—´') || message.toLowerCase().includes('è®¡åˆ’')) {\n            response = `å¯¹äºŽ\"${planTitle}\"è¿™æ ·çš„ä»»åŠ¡ï¼Œæˆ‘å»ºè®®ä½¿ç”¨ä»¥ä¸‹æ—¶é—´è§„åˆ’ç­–ç•¥ï¼š\n\n1. è®¾ç½®æ˜Žç¡®çš„æœ€ç»ˆæˆªæ­¢æ—¥æœŸ\n2. ä¸ºæ¯ä¸ªä¸»è¦é˜¶æ®µåˆ†é…æ—¶é—´åŒºé—´\n3. åœ¨å…³é”®ç‚¹è®¾ç½®ç¼“å†²æ—¶é—´ï¼Œé¢„é˜²æ„å¤–å»¶è¿Ÿ\n4. ä½¿ç”¨å€’æŽ¨æ³•ç¡®å®šå„ä»»åŠ¡çš„èµ·å§‹æ—¶é—´\n5. æ¯æ—¥/æ¯å‘¨æ£€æŸ¥è¿›åº¦ï¼ŒåŠæ—¶è°ƒæ•´è®¡åˆ’\n\næ‚¨å¸Œæœ›æˆ‘å¸®æ‚¨åˆ¶å®šè¯¦ç»†çš„æ—¶é—´çº¿å—ï¼Ÿå¦‚æžœæ˜¯ï¼Œè¯·å‘Šè¯‰æˆ‘\"${planTitle}\"çš„é¢„æœŸå®Œæˆæ—¥æœŸã€‚`;\n          } else if (message.toLowerCase().includes('æœ€ä½³å®žè·µ') || message.toLowerCase().includes('å»ºè®®')) {\n            response = `å…³äºŽ\"${planTitle}\"ï¼Œæˆ‘æœ‰ä»¥ä¸‹æœ€ä½³å®žè·µå»ºè®®ï¼š\n\n1. ä½¿ç”¨SMARTåŽŸåˆ™ï¼ˆå…·ä½“ã€å¯è¡¡é‡ã€å¯è¾¾æˆã€ç›¸å…³ã€æœ‰æ—¶é™ï¼‰å®šä¹‰æ¯ä¸ªä»»åŠ¡\n2. è®¾ç½®æ¸…æ™°çš„ä¼˜å…ˆçº§ï¼Œå…ˆå¤„ç†é‡è¦ä¸”ç´§æ€¥çš„ä»»åŠ¡\n3. ä½¿ç”¨ç•ªèŒ„å·¥ä½œæ³•ï¼ˆ25åˆ†é’Ÿä¸“æ³¨+5åˆ†é’Ÿä¼‘æ¯ï¼‰æé«˜æ•ˆçŽ‡\n4. æ¯æ—¥ç»“æŸæ—¶å›žé¡¾è¿›åº¦ï¼Œè®¡åˆ’ç¬¬äºŒå¤©çš„ä»»åŠ¡\n5. å®šæœŸä¸Žç›¸å…³æ–¹æ²Ÿé€šè¿›åº¦ï¼Œç¡®ä¿æœŸæœ›ä¸€è‡´\n6. ä½¿ç”¨å·¥å…·å¦‚ç”˜ç‰¹å›¾å¯è§†åŒ–è¿›åº¦\n\nè¿™äº›å®žè·µå¯ä»¥å¸®åŠ©æ‚¨æ›´é«˜æ•ˆåœ°å®Œæˆ\"${planTitle}\"ã€‚æ‚¨æƒ³äº†è§£å…¶ä¸­å“ªä¸ªæ–¹é¢çš„æ›´å¤šç»†èŠ‚ï¼Ÿ`;\n          } else if (references && references.length > 0) {\n            // å¦‚æžœæœ‰å¼•ç”¨æ–‡ä»¶ï¼ŒåŸºäºŽæ–‡ä»¶å†…å®¹ç»™å‡ºå“åº”\n            // åˆ†æžå¼•ç”¨æ–‡ä»¶å†…å®¹\n            const filesAnalysis = references.map(file => {\n              const content = fileContents[file] || `(æ— æ³•è¯»å–æ–‡ä»¶ ${file})`;\n              return `${file}: ${content.length > 50 ? content.substring(0, 50) + '...' : content}`;\n            }).join('\\n');\n            response = `æˆ‘å·²åˆ†æžäº†ä½ å¼•ç”¨çš„æ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„å‘çŽ°ï¼š\n\næ ¹æ®æ–‡ä»¶å†…å®¹ï¼Œè¿™æ˜¯ä¸€ä¸ªä½¿ç”¨Reactæ¡†æž¶æž„å»ºçš„ä»»åŠ¡ç®¡ç†åº”ç”¨ã€‚ä¸»è¦ç»„ä»¶åŒ…æ‹¬è®¡åˆ’æ ‘(plan-tree)ã€å·¥ä½œåŒºå’Œä»ªè¡¨ç›˜ã€‚\n\næˆ‘å»ºè®®ä½ å¯ä»¥ï¼š\n1. æ£€æŸ¥ç»„ä»¶ä¹‹é—´çš„æ•°æ®æµæ˜¯å¦æ¸…æ™°\n2. ç¡®ä¿çŠ¶æ€ç®¡ç†é€»è¾‘é›†ä¸­ä¸”ä¸€è‡´\n3. è€ƒè™‘æ·»åŠ å•å…ƒæµ‹è¯•ç¡®ä¿åŠŸèƒ½ç¨³å®šæ€§`;\n          } else {\n            response = `å…³äºŽ\"${planTitle}\"ä»»åŠ¡ï¼Œæˆ‘å¯ä»¥å¸®æ‚¨ï¼š\n\n- è¯¦ç»†æ‹†è§£ä»»åŠ¡æ­¥éª¤\n- åˆ¶å®šæ—¶é—´çº¿å’Œé‡Œç¨‹ç¢‘\n- æä¾›æœ€ä½³å®žè·µå’Œæ•ˆçŽ‡å»ºè®®\n- åˆ†æžæ½œåœ¨é£Žé™©å’Œè§£å†³æ–¹æ¡ˆ\n- å¸®æ‚¨è¿½è¸ªå’Œè°ƒæ•´è®¡åˆ’è¿›åº¦\n\næ‚¨æƒ³ä»Žå“ªä¸ªæ–¹é¢ç€æ‰‹ä¼˜åŒ–\"${planTitle}\"çš„è®¡åˆ’ï¼Ÿ`;\n          }\n        } else if (message.toLowerCase().includes('ä»»åŠ¡æ‹†è§£')) {\n          response = `æˆ‘å¯ä»¥å¸®ä½ æ‹†è§£ä»»åŠ¡ã€‚ä¸€ä¸ªå¥½çš„ä»»åŠ¡æ‹†è§£åº”è¯¥åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š\n\n1. æ˜Žç¡®ä»»åŠ¡ç›®æ ‡\n2. å°†å¤§ä»»åŠ¡åˆ†è§£ä¸ºå°ä»»åŠ¡\n3. è¯„ä¼°æ¯ä¸ªå°ä»»åŠ¡çš„ä¼˜å…ˆçº§\n4. è®¾å®šæ¯ä¸ªå°ä»»åŠ¡çš„å®Œæˆæ—¶é—´\n5. åˆ†é…èµ„æº\n\nå¸Œæœ›è¿™å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼`;\n        } else if (message.toLowerCase().includes('ä¼˜åŒ–')) {\n          response = `è¦ä¼˜åŒ–ä½ çš„ä»»åŠ¡è®¡åˆ’ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š\n\n1. ä½¿ç”¨ç•ªèŒ„å·¥ä½œæ³•æé«˜ä¸“æ³¨åº¦\n2. å»ºç«‹ä¾‹è¡Œå…¬äº‹ï¼Œå‡å°‘å†³ç­–ç–²åŠ³\n3. æ‰¹é‡å¤„ç†åŒç±»åž‹çš„ä»»åŠ¡\n4. å®šæœŸå›žé¡¾å’Œè°ƒæ•´ä½ çš„è®¡åˆ’\n5. ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·å‡å°‘é‡å¤å·¥ä½œ`;\n        } else if (references && references.length > 0) {\n          // å¦‚æžœæœ‰å¼•ç”¨æ–‡ä»¶ï¼ŒåŸºäºŽæ–‡ä»¶å†…å®¹ç»™å‡ºå“åº”\n          const fileContent = references.map(file => fileContents[file] || `(æ— æ³•è¯»å–æ–‡ä»¶ ${file})`).join('\\n\\n');\n          response = `æˆ‘å·²åˆ†æžäº†ä½ å¼•ç”¨çš„æ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„å‘çŽ°ï¼š\n\næ ¹æ®æ–‡ä»¶å†…å®¹ï¼Œè¿™æ˜¯ä¸€ä¸ªä½¿ç”¨Reactæ¡†æž¶æž„å»ºçš„ä»»åŠ¡ç®¡ç†åº”ç”¨ã€‚ä¸»è¦ç»„ä»¶åŒ…æ‹¬è®¡åˆ’æ ‘(plan-tree)ã€å·¥ä½œåŒºå’Œä»ªè¡¨ç›˜ã€‚\n\næˆ‘å»ºè®®ä½ å¯ä»¥ï¼š\n1. æ£€æŸ¥ç»„ä»¶ä¹‹é—´çš„æ•°æ®æµæ˜¯å¦æ¸…æ™°\n2. ç¡®ä¿çŠ¶æ€ç®¡ç†é€»è¾‘é›†ä¸­ä¸”ä¸€è‡´\n3. è€ƒè™‘æ·»åŠ å•å…ƒæµ‹è¯•ç¡®ä¿åŠŸèƒ½ç¨³å®šæ€§`;\n        } else {\n          response = `æˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©ä½ :\n\n- å›žç­”å…³äºŽä»»åŠ¡ç®¡ç†çš„é—®é¢˜\n- æä¾›ä»»åŠ¡æ‹†è§£å’Œä¼˜åŒ–å»ºè®®\n- åˆ†æžé¡¹ç›®æ–‡ä»¶å’Œä»£ç \n\nä½ å¯ä»¥å°è¯•è¯¢é—®å…³äºŽ\"ä»»åŠ¡æ‹†è§£\"æˆ–\"ä¼˜åŒ–\"çš„é—®é¢˜ï¼Œæˆ–è€…ä½¿ç”¨@å¼•ç”¨ç‰¹å®šæ–‡ä»¶ï¼Œæˆ‘ä¼šåŸºäºŽæ–‡ä»¶å†…å®¹ç»™ä½ æ›´å…·ä½“çš„å»ºè®®ã€‚`;\n        }\n        resolve(response);\n      }, 1500);\n    });\n  };\n\n  // ç›‘å¬å¿«æ·é”®\n  useEffect(() => {\n    const handleKeyDown = e => {\n      // æ£€æŸ¥Cmd+Kæˆ–Ctrl+K\n      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\n        e.preventDefault();\n        setIsCommandPaletteOpen(true);\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  // å¤„ç†å·¦ä¾§è¾¹æ æ‹–æ‹½è°ƒæ•´å®½åº¦\n  const handleLeftResizeMouseDown = e => {\n    e.preventDefault();\n    setIsLeftResizing(true);\n    leftResizingRef.current = {\n      startX: e.clientX,\n      startWidth: leftSidebarWidth\n    };\n  };\n  useEffect(() => {\n    const handleLeftResizeMouseMove = e => {\n      if (!isLeftResizing || !leftResizingRef.current) return;\n      const delta = e.clientX - leftResizingRef.current.startX;\n      const newWidth = Math.max(200, Math.min(500, leftResizingRef.current.startWidth + delta));\n      setLeftSidebarWidth(newWidth);\n    };\n    const handleLeftResizeMouseUp = () => {\n      setIsLeftResizing(false);\n      leftResizingRef.current = null;\n    };\n    if (isLeftResizing) {\n      document.addEventListener('mousemove', handleLeftResizeMouseMove);\n      document.addEventListener('mouseup', handleLeftResizeMouseUp);\n    }\n    return () => {\n      document.removeEventListener('mousemove', handleLeftResizeMouseMove);\n      document.removeEventListener('mouseup', handleLeftResizeMouseUp);\n    };\n  }, [isLeftResizing]);\n\n  // å¤„ç†å³ä¾§è¾¹æ æ‹–æ‹½è°ƒæ•´å®½åº¦\n  const handleResizeMouseDown = e => {\n    e.preventDefault();\n    setIsResizing(true);\n    resizingRef.current = {\n      startX: e.clientX,\n      startWidth: rightSidebarWidth\n    };\n  };\n  useEffect(() => {\n    const handleResizeMouseMove = e => {\n      if (!isResizing || !resizingRef.current) return;\n      const delta = resizingRef.current.startX - e.clientX;\n      const newWidth = Math.max(280, Math.min(800, resizingRef.current.startWidth + delta));\n      setRightSidebarWidth(newWidth);\n    };\n    const handleResizeMouseUp = () => {\n      setIsResizing(false);\n      resizingRef.current = null;\n    };\n    if (isResizing) {\n      document.addEventListener('mousemove', handleResizeMouseMove);\n      document.addEventListener('mouseup', handleResizeMouseUp);\n    }\n    return () => {\n      document.removeEventListener('mousemove', handleResizeMouseMove);\n      document.removeEventListener('mouseup', handleResizeMouseUp);\n    };\n  }, [isResizing]);\n\n  // å®šä¹‰å¯ç”¨å‘½ä»¤ - æ·»åŠ ä¸Žæ ‘ç›¸å…³çš„å‘½ä»¤\n  const commands = [{\n    id: 'new-file',\n    name: 'æ–°å»ºæ–‡ä»¶',\n    description: 'åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶',\n    icon: /*#__PURE__*/_jsxDEV(\"svg\", {\n      className: \"w-5 h-5\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      viewBox: \"0 0 24 24\",\n      children: /*#__PURE__*/_jsxDEV(\"path\", {\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        strokeWidth: 2,\n        d: \"M12 4v16m8-8H4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 9\n    }, this),\n    action: () => {\n      const fileName = prompt('è¯·è¾“å…¥æ–‡ä»¶å:');\n      if (fileName && !openFiles.includes(fileName)) {\n        setOpenFiles(prev => [...prev, fileName]);\n        setFileContents(prev => ({\n          ...prev,\n          [fileName]: ''\n        }));\n        setCurrentFile(fileName);\n        toast.success(`æ–‡ä»¶ ${fileName} å·²åˆ›å»º`);\n      }\n    }\n  }, {\n    id: 'toggle-left-sidebar',\n    name: 'åˆ‡æ¢å·¦ä¾§æ ',\n    description: 'æ˜¾ç¤ºæˆ–éšè—å·¦ä¾§æ–‡ä»¶æ ',\n    icon: /*#__PURE__*/_jsxDEV(\"svg\", {\n      className: \"w-5 h-5\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      viewBox: \"0 0 24 24\",\n      children: /*#__PURE__*/_jsxDEV(\"path\", {\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        strokeWidth: 2,\n        d: \"M4 6h16M4 12h16M4 18h7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 9\n    }, this),\n    action: () => {\n      setIsLeftSidebarCollapsed(!isLeftSidebarCollapsed);\n    }\n  }, {\n    id: 'toggle-right-sidebar',\n    name: 'åˆ‡æ¢AIåŠ©æ‰‹',\n    description: 'æ˜¾ç¤ºæˆ–éšè—å³ä¾§AIåŠ©æ‰‹',\n    icon: /*#__PURE__*/_jsxDEV(\"svg\", {\n      className: \"w-5 h-5\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      viewBox: \"0 0 24 24\",\n      children: /*#__PURE__*/_jsxDEV(\"path\", {\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        strokeWidth: 2,\n        d: \"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 9\n    }, this),\n    action: () => {\n      setIsRightSidebarCollapsed(!isRightSidebarCollapsed);\n    }\n  }, {\n    id: 'ask-ai',\n    name: 'è¯¢é—®AI',\n    description: 'ç›´æŽ¥å‘AIåŠ©æ‰‹æé—®',\n    icon: /*#__PURE__*/_jsxDEV(\"svg\", {\n      className: \"w-5 h-5\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      viewBox: \"0 0 24 24\",\n      children: /*#__PURE__*/_jsxDEV(\"path\", {\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        strokeWidth: 2,\n        d: \"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 9\n    }, this),\n    action: () => {\n      setIsRightSidebarCollapsed(false);\n      toast.info('è¯·åœ¨AIåŠ©æ‰‹æ ä¸­æé—®');\n    }\n  }, {\n    id: 'go-to-dashboard',\n    name: 'è¿”å›žä»»åŠ¡è®¡åˆ’',\n    description: 'è¿”å›žåˆ°ä»»åŠ¡è®¡åˆ’é¡µé¢',\n    icon: /*#__PURE__*/_jsxDEV(\"svg\", {\n      className: \"w-5 h-5\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      viewBox: \"0 0 24 24\",\n      children: /*#__PURE__*/_jsxDEV(\"path\", {\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        strokeWidth: 2,\n        d: \"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 9\n    }, this),\n    action: () => {\n      handleReturnToDashboard();\n    }\n  }, {\n    id: 'view-tree',\n    name: 'æŸ¥çœ‹è¿›åº¦æ ‘',\n    description: 'æŸ¥çœ‹é¡¹ç›®è¿›åº¦å¯è§†åŒ–æ ‘',\n    icon: /*#__PURE__*/_jsxDEV(\"svg\", {\n      className: \"w-5 h-5\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      viewBox: \"0 0 24 24\",\n      children: /*#__PURE__*/_jsxDEV(\"path\", {\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        strokeWidth: 2,\n        d: \"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 9\n    }, this),\n    action: () => {\n      setActiveTab('tree');\n      toast.success('å·²åˆ‡æ¢åˆ°è¿›åº¦æ ‘è§†å›¾');\n    }\n  }, {\n    id: 'view-files',\n    name: 'æŸ¥çœ‹æ–‡ä»¶',\n    description: 'æŸ¥çœ‹é¡¹ç›®æ–‡ä»¶',\n    icon: /*#__PURE__*/_jsxDEV(\"svg\", {\n      className: \"w-5 h-5\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      viewBox: \"0 0 24 24\",\n      children: /*#__PURE__*/_jsxDEV(\"path\", {\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        strokeWidth: 2,\n        d: \"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 9\n    }, this),\n    action: () => {\n      setActiveTab('files');\n      toast.success('å·²åˆ‡æ¢åˆ°æ–‡ä»¶è§†å›¾');\n    }\n  }];\n\n  // æ¸²æŸ“è¡Œå·å’Œæ–‡æœ¬å†…å®¹\n  const renderFileContent = content => {\n    const lines = content.split('\\n');\n    return lines.map((line, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-gray-400 w-10 text-right pr-4 select-none\",\n        children: index + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: line\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 9\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 553,\n      columnNumber: 7\n    }, this));\n  };\n\n  // è‡ªå®šä¹‰è¿”å›žä»ªè¡¨æ¿å‡½æ•°\n  const handleReturnToDashboard = () => {\n    // å¼ºåˆ¶é‡æ–°åŠ è½½é¡µé¢ä»¥ç¡®ä¿è®¡åˆ’æ˜¾ç¤º\n    window.location.href = '/dashboard?refresh=' + Date.now();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen flex flex-col bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-white border-b border-gray-200 sticky top-0 z-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto flex justify-between items-center px-4 py-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-600 text-white h-8 w-8 rounded flex items-center justify-center font-bold\",\n            children: \"L\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold text-lg\",\n            children: \"Linden AI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hidden sm:flex flex-1 max-w-md mx-8\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative w-full bg-gray-50 border border-gray-200 rounded-md flex items-center px-3 cursor-pointer\",\n            onClick: () => setIsCommandPaletteOpen(true),\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-5 w-5 text-gray-400\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 586,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full py-2 px-2 text-gray-400 text-sm\",\n              children: \"\\u641C\\u7D22\\u6216\\u4F7F\\u7528\\u547D\\u4EE4...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-400 bg-gray-100 px-1.5 py-0.5 rounded\",\n              children: \"\\u2318K\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 581,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"ghost\",\n            size: \"sm\",\n            className: \"text-gray-700\",\n            children: \"EN\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            className: \"border-blue-600 text-blue-600 hover:bg-blue-50\",\n            onClick: handleReturnToDashboard,\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-5 h-5 mr-1\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 611,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 15\n            }, this), \"\\u8FD4\\u56DE\\u4EFB\\u52A1\\u8BA1\\u5212\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-8 w-8 rounded-full bg-blue-600 text-white flex items-center justify-center cursor-pointer\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"U\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 617,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 616,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 569,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bg-gray-800 text-white flex flex-col ${isLeftSidebarCollapsed ? 'w-14' : ''} ${isLeftResizing ? '' : 'transition-all duration-300'} border-r border-gray-700`,\n        style: {\n          width: isLeftSidebarCollapsed ? undefined : `${leftSidebarWidth}px`\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between p-4 border-b border-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: `font-medium ${isLeftSidebarCollapsed ? 'hidden' : 'block'}`,\n            children: \"\\u9879\\u76EE\\u5BFC\\u822A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 633,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsLeftSidebarCollapsed(!isLeftSidebarCollapsed),\n            className: \"text-gray-400 hover:text-white\",\n            children: isLeftSidebarCollapsed ? /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-5 h-5\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M13 5l7 7-7 7M5 5l7 7-7 7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 640,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-5 h-5\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M11 19l-7-7 7-7m8 14l-7-7 7-7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 644,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 643,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 634,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-auto p-2\",\n          children: !isLeftSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"py-2 space-y-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex items-center ${activeTab === 'tree' ? 'text-white bg-gray-700' : 'text-gray-300 hover:text-white'} py-2 px-3 rounded hover:bg-gray-700 cursor-pointer`,\n              onClick: () => setActiveTab('tree'),\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-5 h-5 mr-2\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 660,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 659,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u8FDB\\u5EA6\\u6811\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 662,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 655,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex items-center ${activeTab === 'files' ? 'text-white bg-gray-700' : 'text-gray-300 hover:text-white'} py-2 px-3 rounded hover:bg-gray-700 cursor-pointer`,\n              onClick: () => setActiveTab('files'),\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-5 h-5 mr-2\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 671,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 670,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u9879\\u76EE\\u6587\\u4EF6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 666,\n              columnNumber: 17\n            }, this), activeTab === 'files' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 pl-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-400 uppercase font-semibold mb-2\",\n                children: \"\\u6587\\u4EF6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 679,\n                columnNumber: 21\n              }, this), Object.keys(fileContents).map(fileName => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `flex items-center ${fileName === currentFile ? 'text-white bg-gray-700' : 'text-gray-300 hover:text-white'} py-1 px-2 rounded hover:bg-gray-700 cursor-pointer`,\n                onClick: () => {\n                  setActiveTab('files');\n                  if (!openFiles.includes(fileName)) {\n                    setOpenFiles(prev => [...prev, fileName]);\n                  }\n                  setCurrentFile(fileName);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-4 h-4 mr-2 flex-shrink-0\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 693,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 692,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"truncate text-sm\",\n                  children: fileName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 695,\n                  columnNumber: 25\n                }, this)]\n              }, fileName, true, {\n                fileName: _jsxFileName,\n                lineNumber: 681,\n                columnNumber: 23\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 678,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 653,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 651,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 9\n      }, this), !isLeftSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `w-1.5 hover:bg-blue-300 cursor-col-resize relative ${isLeftResizing ? 'bg-blue-400' : 'bg-transparent'}`,\n        onMouseDown: handleLeftResizeMouseDown,\n        \"aria-label\": \"\\u8C03\\u6574\\u6587\\u4EF6\\u6D4F\\u89C8\\u5668\\u5927\\u5C0F\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-y-0 -left-1 -right-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 712,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 707,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-auto bg-white flex flex-col\",\n        children: activeTab === 'files' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center border-b border-gray-200 h-10 bg-gray-50\",\n            children: openFiles.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex items-center px-4 py-1 border-r border-gray-200 text-gray-600 text-sm font-medium cursor-pointer ${file === currentFile ? 'bg-white border-b-2 border-b-blue-500' : 'hover:bg-gray-100'}`,\n              onClick: () => setCurrentFile(file),\n              children: [file, /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"ml-2 text-gray-400 hover:text-gray-600\",\n                onClick: e => {\n                  e.stopPropagation();\n                  if (openFiles.length > 1) {\n                    setOpenFiles(prev => prev.filter(f => f !== file));\n                    if (currentFile === file) {\n                      setCurrentFile(openFiles.find(f => f !== file) || '');\n                    }\n                  }\n                },\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-4 h-4\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M6 18L18 6M6 6l12 12\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 744,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 743,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 731,\n                columnNumber: 21\n              }, this)]\n            }, file, true, {\n              fileName: _jsxFileName,\n              lineNumber: 723,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 721,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 overflow-auto p-6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"max-w-4xl mx-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-mono text-sm text-gray-800 whitespace-pre-wrap\",\n                children: currentFile && fileContents[currentFile] ? renderFileContent(fileContents[currentFile]) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-gray-400 text-center py-10\",\n                  children: \"\\u6CA1\\u6709\\u6253\\u5F00\\u7684\\u6587\\u4EF6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 757,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 754,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 753,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 752,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) :\n        /*#__PURE__*/\n        /* æ ‘è§†å›¾ */\n        _jsxDEV(ProjectTree, {\n          planTitle: planTitle || 'æœªå‘½åé¡¹ç›®',\n          progress: treeProgress,\n          tasksCompleted: tasksCompleted,\n          totalTasks: totalTasks,\n          onTaskComplete: () => {\n            // æ›´æ–°ä»»åŠ¡å®Œæˆæ•°é‡\n            const newTasksCompleted = Math.min(tasksCompleted + 1, totalTasks);\n            setTasksCompleted(newTasksCompleted);\n\n            // æ›´æ–°è¿›åº¦\n            const newProgress = Math.min(Math.round(newTasksCompleted / totalTasks * 100), 100);\n            setTreeProgress(newProgress);\n\n            // æ›´æ–°ä»»åŠ¡æ–‡ä»¶å†…å®¹ - å°†ç¬¬ä¸€ä¸ªæœªå®Œæˆçš„ä»»åŠ¡æ ‡è®°ä¸ºå·²å®Œæˆ\n            if (fileContents['tasks.md']) {\n              const tasksMd = fileContents['tasks.md'];\n              // æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæœªå®Œæˆçš„ä»»åŠ¡\n              const updatedTasksMd = tasksMd.replace(/- \\[ \\] (.*)/, (match, p1) => `- [x] ${p1}`);\n              setFileContents(prev => ({\n                ...prev,\n                'tasks.md': updatedTasksMd\n              }));\n            }\n\n            // æ˜¾ç¤ºæç¤º\n            toast.success('ðŸŒ± ä»»åŠ¡å·²å®Œæˆï¼æ ‘æˆé•¿äº†ä¸€ç‚¹ï¼', {\n              duration: 3000,\n              position: 'top-center'\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 765,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 717,\n        columnNumber: 9\n      }, this), !isRightSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `w-1.5 hover:bg-blue-300 cursor-col-resize relative ${isResizing ? 'bg-blue-400' : 'bg-transparent'}`,\n        onMouseDown: handleResizeMouseDown,\n        \"aria-label\": \"\\u8C03\\u6574\\u804A\\u5929\\u7A97\\u53E3\\u5927\\u5C0F\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-y-0 -left-1 -right-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 811,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 806,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bg-white border-l border-gray-200 flex flex-col ${isRightSidebarCollapsed ? 'w-14' : ''} ${isResizing ? '' : 'transition-all duration-300'}`,\n        style: {\n          width: isRightSidebarCollapsed ? undefined : `${rightSidebarWidth}px`\n        },\n        children: [!isRightSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-hidden\",\n          children: /*#__PURE__*/_jsxDEV(AIChat, {\n            initialMessages: generateInitialMessages(),\n            onSendMessage: handleSendMessage,\n            onClose: () => setIsRightSidebarCollapsed(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 824,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 823,\n          columnNumber: 13\n        }, this), isRightSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-full flex flex-col items-center pt-4\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"text-blue-600 hover:text-blue-800\",\n            onClick: () => setIsRightSidebarCollapsed(false),\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-6 h-6\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 839,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 838,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 834,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 833,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 816,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 624,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CommandPalette, {\n      isOpen: isCommandPaletteOpen,\n      onClose: () => setIsCommandPaletteOpen(false),\n      commands: commands\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 848,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 567,\n    columnNumber: 5\n  }, this);\n};\n_s(WorkspacePage, \"+8INDtQvcvgibS7mkj4wGHdIjJY=\", false, function () {\n  return [useLocation, usePlanStore];\n});\n_c = WorkspacePage;\nexport default WorkspacePage;\nvar _c;\n$RefreshReg$(_c, \"WorkspacePage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useLocation","Button","AIChat","CommandPalette","ProjectTree","usePlanStore","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","getQueryParams","params","URLSearchParams","window","location","search","plan","get","decodeURIComponent","WorkspacePage","_s","addPlan","activeTab","setActiveTab","isLeftSidebarCollapsed","setIsLeftSidebarCollapsed","leftSidebarWidth","setLeftSidebarWidth","isLeftResizing","setIsLeftResizing","leftResizingRef","isRightSidebarCollapsed","setIsRightSidebarCollapsed","rightSidebarWidth","setRightSidebarWidth","isResizing","setIsResizing","resizingRef","isCommandPaletteOpen","setIsCommandPaletteOpen","openFiles","setOpenFiles","currentFile","setCurrentFile","planTitle","setPlanTitle","treeProgress","setTreeProgress","tasksCompleted","setTasksCompleted","totalTasks","setTotalTasks","generateDefaultFileContents","defaultContents","Date","toLocaleDateString","newFileContents","setFileContents","planFiles","prevFiles","filter","file","includes","createPlanInStore","newPlan","title","description","progress","status","success","error","console","fileContents","generateInitialMessages","defaultMessage","id","role","content","timestamp","handleSendMessage","message","references","taskCompleteRegex","isTaskComplete","test","match","taskName","trim","prev","Math","min","newProgress","round","tasksMd","updatedTasksMd","replace","p1","duration","position","Promise","resolve","setTimeout","response","toLowerCase","length","filesAnalysis","map","substring","join","fileContent","handleKeyDown","e","metaKey","ctrlKey","key","preventDefault","addEventListener","removeEventListener","handleLeftResizeMouseDown","current","startX","clientX","startWidth","handleLeftResizeMouseMove","delta","newWidth","max","handleLeftResizeMouseUp","document","handleResizeMouseDown","handleResizeMouseMove","handleResizeMouseUp","commands","name","icon","className","fill","stroke","viewBox","children","strokeLinecap","strokeLinejoin","strokeWidth","d","fileName","_jsxFileName","lineNumber","columnNumber","action","prompt","info","handleReturnToDashboard","renderFileContent","lines","split","line","index","href","now","onClick","variant","size","style","width","undefined","Object","keys","onMouseDown","stopPropagation","f","find","onTaskComplete","newTasksCompleted","initialMessages","onSendMessage","onClose","isOpen","_c","$RefreshReg$"],"sources":["/home/devbox/project/src/pages/workspace-page.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Button } from '../components/ui/button';\nimport AIChat, { Message } from '../components/features/ai-chat/ai-chat';\nimport CommandPalette from '../components/features/command/command-palette';\nimport ProjectTree from '../components/features/tree-growth/project-tree';\nimport { usePlanStore } from '../lib/store';\nimport { toast } from 'sonner';\n\n// ä»ŽURLä¸­èŽ·å–å‚æ•°çš„å·¥å…·å‡½æ•°\nconst getQueryParams = () => {\n  const params = new URLSearchParams(window.location.search);\n  const plan = params.get('plan');\n  return {\n    plan: plan ? decodeURIComponent(plan) : null\n  };\n};\n\n// æ–‡ä»¶å†…å®¹ç±»åž‹å®šä¹‰\ninterface FileContents {\n  [key: string]: string;\n}\n\n// å·¥ä½œåŒºæ ‡ç­¾ç±»åž‹\ntype WorkspaceTab = 'tree' | 'files';\n\nconst WorkspacePage: React.FC = () => {\n  const location = useLocation();\n  const { addPlan } = usePlanStore(); // ä½¿ç”¨è®¡åˆ’å­˜å‚¨\n  const [activeTab, setActiveTab] = useState<WorkspaceTab>('tree'); // é»˜è®¤æ˜¾ç¤ºæ ‘é¡µé¢\n  const [isLeftSidebarCollapsed, setIsLeftSidebarCollapsed] = useState(false);\n  const [leftSidebarWidth, setLeftSidebarWidth] = useState(256); // Default width of 64 in rem (w-64)\n  const [isLeftResizing, setIsLeftResizing] = useState(false);\n  const leftResizingRef = useRef<{ startX: number; startWidth: number } | null>(null);\n  \n  const [isRightSidebarCollapsed, setIsRightSidebarCollapsed] = useState(false);\n  const [rightSidebarWidth, setRightSidebarWidth] = useState(384); // Default width of 96 in rem (w-96)\n  const [isResizing, setIsResizing] = useState(false);\n  const resizingRef = useRef<{ startX: number; startWidth: number } | null>(null);\n  \n  const [isCommandPaletteOpen, setIsCommandPaletteOpen] = useState(false);\n  const [openFiles, setOpenFiles] = useState(['workspace.txt']);\n  const [currentFile, setCurrentFile] = useState('workspace.txt');\n  const [planTitle, setPlanTitle] = useState<string | null>(null);\n  \n  // æ ‘çš„è¿›åº¦çŠ¶æ€\n  const [treeProgress, setTreeProgress] = useState(5); // é»˜è®¤5%è¿›åº¦\n  const [tasksCompleted, setTasksCompleted] = useState(1);\n  const [totalTasks, setTotalTasks] = useState(10);\n  \n  // ç”Ÿæˆé»˜è®¤çš„æ–‡ä»¶å†…å®¹\n  const generateDefaultFileContents = (plan: string | null) => {\n    const defaultContents: FileContents = {\n      'workspace.txt': `# ä»»åŠ¡è®¡åˆ’ AI å·¥ä½œåŒº\n\nè¿™æ˜¯ä¸€ä¸ªé›†æˆå¼AIå·¥ä½œçŽ¯å¢ƒï¼Œä½ å¯ä»¥ï¼š\n- å‘AIæå‡ºå…³äºŽä»»åŠ¡çš„é—®é¢˜\n- èŽ·å–å…³äºŽä»»åŠ¡æ‹†è§£çš„å»ºè®®\n- ä½¿ç”¨AIååŠ©ç®¡ç†å’Œä¼˜åŒ–ä½ çš„ä»»åŠ¡è®¡åˆ’\n\n## ä½¿ç”¨æ–¹æ³•\n\n1. åœ¨å³ä¾§AIåŠ©æ‰‹ä¸­æé—®\n2. ä½¿ç”¨âŒ˜Kæ‰“å¼€å‘½ä»¤é¢æ¿\n3. ä½¿ç”¨@ç¬¦å·å¼•ç”¨æ–‡ä»¶å’Œèµ„æº`,\n      'project.json': `{\n  \"name\": \"ä»»åŠ¡è®¡åˆ’\",\n  \"version\": \"1.0.0\",\n  \"description\": \"çŽ°ä»£åŒ–çš„ä»»åŠ¡ç®¡ç†åº”ç”¨\",\n  \"framework\": \"React\",\n  \"components\": {\n    \"plans\": \"src/components/features/plan-tree/plan-tree.tsx\",\n    \"workspace\": \"src/pages/workspace-page.tsx\",\n    \"dashboard\": \"src/pages/dashboard-page.tsx\"\n  }\n}`\n    };\n    \n    // å¦‚æžœæœ‰è®¡åˆ’æ ‡é¢˜ï¼Œåˆ™æ·»åŠ è®¡åˆ’ç›¸å…³æ–‡ä»¶\n    if (plan) {\n      defaultContents['plan-overview.md'] = `# ${plan}\n\n## è®¡åˆ’æ¦‚è¿°\nè¿™æ˜¯å…³äºŽ\"${plan}\"çš„ä»»åŠ¡è®¡åˆ’ã€‚\n\n## ç›®æ ‡\n- å®Œæˆ\"${plan}\"ç›¸å…³çš„æ‰€æœ‰å¿…è¦ä»»åŠ¡\n- æŒ‰æ—¶é«˜è´¨é‡åœ°äº¤ä»˜æˆæžœ\n- ä¿æŒè¿›åº¦å¯è§†åŒ–å’Œå¯è¿½è¸ª\n\n## æ—¶é—´çº¿\n- å¼€å§‹æ—¶é—´: ${new Date().toLocaleDateString()}\n- é¢„è®¡å®Œæˆ: å¾…å®š\n`;\n\n      defaultContents['tasks.md'] = `# ${plan} - ä»»åŠ¡æ¸…å•\n\n## å¾…å®Œæˆä»»åŠ¡\n- [ ] ä»»åŠ¡1: å®šä¹‰\"${plan}\"çš„å…·ä½“ç›®æ ‡å’ŒèŒƒå›´\n- [ ] ä»»åŠ¡2: åˆ†è§£\"${plan}\"ä¸ºå¯æ‰§è¡Œçš„å°æ­¥éª¤\n- [ ] ä»»åŠ¡3: ä¸ºæ¯ä¸ªæ­¥éª¤è®¾å®šå®Œæˆæ ‡å‡†\n\n## å·²å®Œæˆä»»åŠ¡\n- [x] åˆ›å»º\"${plan}\"è®¡åˆ’\n`;\n    }\n    \n    return defaultContents;\n  };\n  \n  // èŽ·å–è®¡åˆ’ä¿¡æ¯å¹¶åˆå§‹åŒ–æ–‡ä»¶å†…å®¹\n  useEffect(() => {\n    const { plan } = getQueryParams();\n    if (plan) {\n      setPlanTitle(plan);\n      const newFileContents = generateDefaultFileContents(plan);\n      setFileContents(newFileContents);\n      \n      // æ‰“å¼€è®¡åˆ’ç›¸å…³æ–‡ä»¶\n      const planFiles = ['plan-overview.md', 'tasks.md'];\n      setOpenFiles(prevFiles => ['plan-overview.md', ...prevFiles.filter(file => !planFiles.includes(file))]);\n      setCurrentFile('plan-overview.md');\n      \n      // æ‰“å¼€AIå¯¹è¯æ¡†\n      setIsRightSidebarCollapsed(false);\n      \n      // é»˜è®¤è®¾ç½®é¡¹ç›®æ€»ä»»åŠ¡æ•°\n      setTotalTasks(10);\n      \n      // å°†è®¡åˆ’ä¿å­˜åˆ°è®¡åˆ’å­˜å‚¨ä¸­\n      const createPlanInStore = async () => {\n        try {\n          // åˆ›å»ºè®¡åˆ’å¯¹è±¡\n          const newPlan = {\n            title: plan,\n            description: `è¿™æ˜¯å…³äºŽ\"${plan}\"çš„ä»»åŠ¡è®¡åˆ’ã€‚`,\n            progress: 5, // åˆå§‹è¿›åº¦5%\n            status: 'ongoing' as const\n          };\n          \n          // æ·»åŠ åˆ°è®¡åˆ’å­˜å‚¨\n          await addPlan(newPlan);\n          toast.success(`è®¡åˆ’\"${plan}\"å·²åˆ›å»ºå¹¶ä¿å­˜`);\n        } catch (error) {\n          console.error('ä¿å­˜è®¡åˆ’å¤±è´¥:', error);\n          toast.error('ä¿å­˜è®¡åˆ’å¤±è´¥ï¼Œä½†æ‚¨ä»å¯ä»¥åœ¨å·¥ä½œåŒºä¸­å·¥ä½œ');\n        }\n      };\n      \n      createPlanInStore();\n    } else {\n      setFileContents(generateDefaultFileContents(null));\n    }\n  }, [location.search, addPlan]);\n\n  const [fileContents, setFileContents] = useState<FileContents>(generateDefaultFileContents(null));\n\n  // ç”ŸæˆAIåˆå§‹åŒ–æ¶ˆæ¯\n  const generateInitialMessages = (): Message[] => {\n    const defaultMessage: Message = {\n      id: '1',\n      role: 'system' as const,\n      content: 'æ‚¨å¥½ï¼æˆ‘æ˜¯AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿæ‚¨å¯ä»¥ä½¿ç”¨@å¼•ç”¨æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åˆ‡æ¢æ™ºèƒ½ä½“æ¨¡å¼å’Œå¯¹è¯æ¨¡å¼ï¼Œæˆ–è€…é€‰æ‹©ä¸åŒçš„AIæ¨¡åž‹ã€‚',\n      timestamp: new Date()\n    };\n    \n    // å¦‚æžœæœ‰è®¡åˆ’æ ‡é¢˜ï¼Œæ·»åŠ è®¡åˆ’ç›¸å…³çš„æ¬¢è¿Žæ¶ˆæ¯\n    if (planTitle) {\n      return [\n        defaultMessage,\n        {\n          id: '2',\n          role: 'assistant' as const,\n          content: `æ‚¨å¥½ï¼æˆ‘çœ‹åˆ°æ‚¨æ­£åœ¨åˆ›å»º\"${planTitle}\"çš„ä»»åŠ¡è®¡åˆ’ã€‚\n\næˆ‘å·²ç»ä¸ºæ‚¨åˆå§‹åŒ–äº†ä¸¤ä¸ªæ–‡ä»¶ï¼š\n1. **plan-overview.md** - åŒ…å«è®¡åˆ’æ¦‚è¿°å’Œç›®æ ‡\n2. **tasks.md** - åŒ…å«å¾…å®Œæˆå’Œå·²å®Œæˆçš„ä»»åŠ¡æ¸…å•\n\næ‚¨éœ€è¦æˆ‘å¸®æ‚¨åšä»€ä¹ˆï¼Ÿä¾‹å¦‚ï¼š\n- å¸®æ‚¨æ‹†è§£\"${planTitle}\"ä»»åŠ¡ä¸ºæ›´å°çš„æ­¥éª¤\n- åˆ¶å®šå®Œæˆ\"${planTitle}\"çš„æ—¶é—´çº¿\n- æä¾›å…³äºŽ\"${planTitle}\"çš„æœ€ä½³å®žè·µå»ºè®®`,\n          timestamp: new Date()\n        }\n      ];\n    }\n    \n    return [defaultMessage];\n  };\n\n  // å¤„ç†AIæ¶ˆæ¯\n  const handleSendMessage = async (message: string, references?: string[]): Promise<string> => {\n    // æ£€æŸ¥æ˜¯å¦æ˜¯å®Œæˆä»»åŠ¡çš„æ¶ˆæ¯\n    const taskCompleteRegex = /(å®Œæˆ|å®Œæˆäº†|å·²å®Œæˆ|æ ‡è®°å®Œæˆ|å·²å®Œæˆäº†|å®Œæˆä»»åŠ¡)\\s*([\\S\\s]*?)(ä»»åŠ¡|å­ä»»åŠ¡|å·¥ä½œ|äº‹é¡¹)/i;\n    const isTaskComplete = taskCompleteRegex.test(message);\n    \n    // å¦‚æžœæ˜¯å®Œæˆä»»åŠ¡çš„æ¶ˆæ¯ï¼Œæ›´æ–°æ ‘çš„è¿›åº¦\n    if (isTaskComplete) {\n      // æå–ä»»åŠ¡åç§°\n      const match = message.match(taskCompleteRegex);\n      const taskName = match && match[2] ? match[2].trim() : 'ä¸€ä¸ª';\n      \n      // æ›´æ–°è¿›åº¦\n      setTasksCompleted(prev => Math.min(prev + 1, totalTasks));\n      const newProgress = Math.min(Math.round((tasksCompleted + 1) / totalTasks * 100), 100);\n      setTreeProgress(newProgress);\n      \n      // æ›´æ–°ä»»åŠ¡æ–‡ä»¶å†…å®¹\n      if (fileContents['tasks.md']) {\n        const tasksMd = fileContents['tasks.md'];\n        // æŸ¥æ‰¾å¾…å®Œæˆä»»åŠ¡åˆ—è¡¨ä¸­çš„ä»»åŠ¡ï¼Œå¹¶å°†å…¶ç§»åŠ¨åˆ°å·²å®Œæˆä»»åŠ¡åˆ—è¡¨\n        const updatedTasksMd = tasksMd.replace(\n          /- \\[ \\] (.*)/,\n          (match, p1) => {\n            if (p1.includes(taskName) || taskName === 'ä¸€ä¸ª') {\n              return `- [x] ${p1}`;\n            }\n            return match;\n          }\n        );\n        \n        setFileContents(prev => ({\n          ...prev,\n          'tasks.md': updatedTasksMd\n        }));\n      }\n      \n      // åœ¨æ ‘å¢žé•¿æ—¶æ˜¾ç¤ºæç¤º\n      toast.success(`ðŸŒ± ä»»åŠ¡\"${taskName}\"å·²å®Œæˆï¼æ ‘æˆé•¿äº†ä¸€ç‚¹ï¼`, {\n        duration: 3000,\n        position: 'top-center',\n      });\n    }\n    \n    // æ¨¡æ‹ŸAIå“åº”\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        let response = '';\n        \n        // å¦‚æžœæ˜¯å®Œæˆä»»åŠ¡çš„æ¶ˆæ¯ï¼Œæä¾›ç‰¹å®šçš„å“åº”\n        if (isTaskComplete) {\n          response = `å¤ªæ£’äº†ï¼æˆ‘å·²å°†æ­¤ä»»åŠ¡æ ‡è®°ä¸ºå·²å®Œæˆã€‚\n\næ‚¨çš„é¡¹ç›®è¿›åº¦æ ‘ä¹Ÿå·²ç»æˆé•¿äº†ä¸€ç‚¹ ðŸŒ±\n\nå½“å‰è¿›åº¦ï¼š${treeProgress}%ï¼Œå·²å®Œæˆ ${tasksCompleted}/${totalTasks} ä¸ªä»»åŠ¡ã€‚\n\n${treeProgress >= 100 ? 'æ­å–œæ‚¨å®Œæˆäº†æ‰€æœ‰ä»»åŠ¡ï¼ðŸŽ‰' : 'ç»§ç»­åŠªåŠ›ï¼Œæ‚¨æ­£åœ¨å–å¾—è‰¯å¥½çš„è¿›å±•ï¼'}\n\næœ‰ä»€ä¹ˆå…¶ä»–æˆ‘å¯ä»¥å¸®æ‚¨çš„å—ï¼Ÿ`;\n        }\n        // æ ¹æ®æ¶ˆæ¯å†…å®¹å’Œè®¡åˆ’æ ‡é¢˜ç”Ÿæˆå“åº”\n        else if (planTitle) {\n          if (message.toLowerCase().includes('æ‹†è§£') || message.toLowerCase().includes('æ­¥éª¤')) {\n            response = `æˆ‘å¯ä»¥å¸®ä½ æ‹†è§£\"${planTitle}\"ä»»åŠ¡ã€‚ä¸€ä¸ªå¥½çš„ä»»åŠ¡æ‹†è§£åº”è¯¥åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š\n\n1. æ˜Žç¡®\"${planTitle}\"çš„å…·ä½“ç›®æ ‡å’ŒéªŒæ”¶æ ‡å‡†\n2. å°†\"${planTitle}\"åˆ†è§£ä¸º3-5ä¸ªä¸»è¦é˜¶æ®µ\n3. åœ¨æ¯ä¸ªé˜¶æ®µå†…ï¼Œç¡®å®šå…·ä½“çš„å¯æ‰§è¡Œä»»åŠ¡\n4. ä¼°è®¡æ¯ä¸ªä»»åŠ¡çš„æ—¶é—´å’Œèµ„æºéœ€æ±‚\n5. ç¡®å®šä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»\n6. è®¾ç½®æ£€æŸ¥ç‚¹å’Œé‡Œç¨‹ç¢‘\n\næˆ‘å·²ç»åœ¨tasks.mdæ–‡ä»¶ä¸­åˆ›å»ºäº†åˆå§‹ä»»åŠ¡åˆ—è¡¨ï¼Œæ‚¨å¯ä»¥æ ¹æ®ä¸Šè¿°æ­¥éª¤è¿›ä¸€æ­¥ç»†åŒ–ä»»åŠ¡ã€‚æ‚¨æƒ³è¦æˆ‘å¸®æ‚¨è¯¦ç»†æ‹†è§£å“ªä¸ªæ–¹é¢çš„ä»»åŠ¡ï¼Ÿ`;\n          } else if (message.toLowerCase().includes('æ—¶é—´') || message.toLowerCase().includes('è®¡åˆ’')) {\n            response = `å¯¹äºŽ\"${planTitle}\"è¿™æ ·çš„ä»»åŠ¡ï¼Œæˆ‘å»ºè®®ä½¿ç”¨ä»¥ä¸‹æ—¶é—´è§„åˆ’ç­–ç•¥ï¼š\n\n1. è®¾ç½®æ˜Žç¡®çš„æœ€ç»ˆæˆªæ­¢æ—¥æœŸ\n2. ä¸ºæ¯ä¸ªä¸»è¦é˜¶æ®µåˆ†é…æ—¶é—´åŒºé—´\n3. åœ¨å…³é”®ç‚¹è®¾ç½®ç¼“å†²æ—¶é—´ï¼Œé¢„é˜²æ„å¤–å»¶è¿Ÿ\n4. ä½¿ç”¨å€’æŽ¨æ³•ç¡®å®šå„ä»»åŠ¡çš„èµ·å§‹æ—¶é—´\n5. æ¯æ—¥/æ¯å‘¨æ£€æŸ¥è¿›åº¦ï¼ŒåŠæ—¶è°ƒæ•´è®¡åˆ’\n\næ‚¨å¸Œæœ›æˆ‘å¸®æ‚¨åˆ¶å®šè¯¦ç»†çš„æ—¶é—´çº¿å—ï¼Ÿå¦‚æžœæ˜¯ï¼Œè¯·å‘Šè¯‰æˆ‘\"${planTitle}\"çš„é¢„æœŸå®Œæˆæ—¥æœŸã€‚`;\n          } else if (message.toLowerCase().includes('æœ€ä½³å®žè·µ') || message.toLowerCase().includes('å»ºè®®')) {\n            response = `å…³äºŽ\"${planTitle}\"ï¼Œæˆ‘æœ‰ä»¥ä¸‹æœ€ä½³å®žè·µå»ºè®®ï¼š\n\n1. ä½¿ç”¨SMARTåŽŸåˆ™ï¼ˆå…·ä½“ã€å¯è¡¡é‡ã€å¯è¾¾æˆã€ç›¸å…³ã€æœ‰æ—¶é™ï¼‰å®šä¹‰æ¯ä¸ªä»»åŠ¡\n2. è®¾ç½®æ¸…æ™°çš„ä¼˜å…ˆçº§ï¼Œå…ˆå¤„ç†é‡è¦ä¸”ç´§æ€¥çš„ä»»åŠ¡\n3. ä½¿ç”¨ç•ªèŒ„å·¥ä½œæ³•ï¼ˆ25åˆ†é’Ÿä¸“æ³¨+5åˆ†é’Ÿä¼‘æ¯ï¼‰æé«˜æ•ˆçŽ‡\n4. æ¯æ—¥ç»“æŸæ—¶å›žé¡¾è¿›åº¦ï¼Œè®¡åˆ’ç¬¬äºŒå¤©çš„ä»»åŠ¡\n5. å®šæœŸä¸Žç›¸å…³æ–¹æ²Ÿé€šè¿›åº¦ï¼Œç¡®ä¿æœŸæœ›ä¸€è‡´\n6. ä½¿ç”¨å·¥å…·å¦‚ç”˜ç‰¹å›¾å¯è§†åŒ–è¿›åº¦\n\nè¿™äº›å®žè·µå¯ä»¥å¸®åŠ©æ‚¨æ›´é«˜æ•ˆåœ°å®Œæˆ\"${planTitle}\"ã€‚æ‚¨æƒ³äº†è§£å…¶ä¸­å“ªä¸ªæ–¹é¢çš„æ›´å¤šç»†èŠ‚ï¼Ÿ`;\n          } else if (references && references.length > 0) {\n            // å¦‚æžœæœ‰å¼•ç”¨æ–‡ä»¶ï¼ŒåŸºäºŽæ–‡ä»¶å†…å®¹ç»™å‡ºå“åº”\n            // åˆ†æžå¼•ç”¨æ–‡ä»¶å†…å®¹\n            const filesAnalysis = references.map(file => {\n              const content = fileContents[file] || `(æ— æ³•è¯»å–æ–‡ä»¶ ${file})`;\n              return `${file}: ${content.length > 50 ? content.substring(0, 50) + '...' : content}`;\n            }).join('\\n');\n            \n            response = `æˆ‘å·²åˆ†æžäº†ä½ å¼•ç”¨çš„æ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„å‘çŽ°ï¼š\n\næ ¹æ®æ–‡ä»¶å†…å®¹ï¼Œè¿™æ˜¯ä¸€ä¸ªä½¿ç”¨Reactæ¡†æž¶æž„å»ºçš„ä»»åŠ¡ç®¡ç†åº”ç”¨ã€‚ä¸»è¦ç»„ä»¶åŒ…æ‹¬è®¡åˆ’æ ‘(plan-tree)ã€å·¥ä½œåŒºå’Œä»ªè¡¨ç›˜ã€‚\n\næˆ‘å»ºè®®ä½ å¯ä»¥ï¼š\n1. æ£€æŸ¥ç»„ä»¶ä¹‹é—´çš„æ•°æ®æµæ˜¯å¦æ¸…æ™°\n2. ç¡®ä¿çŠ¶æ€ç®¡ç†é€»è¾‘é›†ä¸­ä¸”ä¸€è‡´\n3. è€ƒè™‘æ·»åŠ å•å…ƒæµ‹è¯•ç¡®ä¿åŠŸèƒ½ç¨³å®šæ€§`;\n          } else {\n            response = `å…³äºŽ\"${planTitle}\"ä»»åŠ¡ï¼Œæˆ‘å¯ä»¥å¸®æ‚¨ï¼š\n\n- è¯¦ç»†æ‹†è§£ä»»åŠ¡æ­¥éª¤\n- åˆ¶å®šæ—¶é—´çº¿å’Œé‡Œç¨‹ç¢‘\n- æä¾›æœ€ä½³å®žè·µå’Œæ•ˆçŽ‡å»ºè®®\n- åˆ†æžæ½œåœ¨é£Žé™©å’Œè§£å†³æ–¹æ¡ˆ\n- å¸®æ‚¨è¿½è¸ªå’Œè°ƒæ•´è®¡åˆ’è¿›åº¦\n\næ‚¨æƒ³ä»Žå“ªä¸ªæ–¹é¢ç€æ‰‹ä¼˜åŒ–\"${planTitle}\"çš„è®¡åˆ’ï¼Ÿ`;\n          }\n        } else if (message.toLowerCase().includes('ä»»åŠ¡æ‹†è§£')) {\n          response = `æˆ‘å¯ä»¥å¸®ä½ æ‹†è§£ä»»åŠ¡ã€‚ä¸€ä¸ªå¥½çš„ä»»åŠ¡æ‹†è§£åº”è¯¥åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š\n\n1. æ˜Žç¡®ä»»åŠ¡ç›®æ ‡\n2. å°†å¤§ä»»åŠ¡åˆ†è§£ä¸ºå°ä»»åŠ¡\n3. è¯„ä¼°æ¯ä¸ªå°ä»»åŠ¡çš„ä¼˜å…ˆçº§\n4. è®¾å®šæ¯ä¸ªå°ä»»åŠ¡çš„å®Œæˆæ—¶é—´\n5. åˆ†é…èµ„æº\n\nå¸Œæœ›è¿™å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼`;\n        } else if (message.toLowerCase().includes('ä¼˜åŒ–')) {\n          response = `è¦ä¼˜åŒ–ä½ çš„ä»»åŠ¡è®¡åˆ’ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š\n\n1. ä½¿ç”¨ç•ªèŒ„å·¥ä½œæ³•æé«˜ä¸“æ³¨åº¦\n2. å»ºç«‹ä¾‹è¡Œå…¬äº‹ï¼Œå‡å°‘å†³ç­–ç–²åŠ³\n3. æ‰¹é‡å¤„ç†åŒç±»åž‹çš„ä»»åŠ¡\n4. å®šæœŸå›žé¡¾å’Œè°ƒæ•´ä½ çš„è®¡åˆ’\n5. ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·å‡å°‘é‡å¤å·¥ä½œ`;\n        } else if (references && references.length > 0) {\n          // å¦‚æžœæœ‰å¼•ç”¨æ–‡ä»¶ï¼ŒåŸºäºŽæ–‡ä»¶å†…å®¹ç»™å‡ºå“åº”\n          const fileContent = references.map(file => fileContents[file] || `(æ— æ³•è¯»å–æ–‡ä»¶ ${file})`).join('\\n\\n');\n          response = `æˆ‘å·²åˆ†æžäº†ä½ å¼•ç”¨çš„æ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„å‘çŽ°ï¼š\n\næ ¹æ®æ–‡ä»¶å†…å®¹ï¼Œè¿™æ˜¯ä¸€ä¸ªä½¿ç”¨Reactæ¡†æž¶æž„å»ºçš„ä»»åŠ¡ç®¡ç†åº”ç”¨ã€‚ä¸»è¦ç»„ä»¶åŒ…æ‹¬è®¡åˆ’æ ‘(plan-tree)ã€å·¥ä½œåŒºå’Œä»ªè¡¨ç›˜ã€‚\n\næˆ‘å»ºè®®ä½ å¯ä»¥ï¼š\n1. æ£€æŸ¥ç»„ä»¶ä¹‹é—´çš„æ•°æ®æµæ˜¯å¦æ¸…æ™°\n2. ç¡®ä¿çŠ¶æ€ç®¡ç†é€»è¾‘é›†ä¸­ä¸”ä¸€è‡´\n3. è€ƒè™‘æ·»åŠ å•å…ƒæµ‹è¯•ç¡®ä¿åŠŸèƒ½ç¨³å®šæ€§`;\n        } else {\n          response = `æˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©ä½ :\n\n- å›žç­”å…³äºŽä»»åŠ¡ç®¡ç†çš„é—®é¢˜\n- æä¾›ä»»åŠ¡æ‹†è§£å’Œä¼˜åŒ–å»ºè®®\n- åˆ†æžé¡¹ç›®æ–‡ä»¶å’Œä»£ç \n\nä½ å¯ä»¥å°è¯•è¯¢é—®å…³äºŽ\"ä»»åŠ¡æ‹†è§£\"æˆ–\"ä¼˜åŒ–\"çš„é—®é¢˜ï¼Œæˆ–è€…ä½¿ç”¨@å¼•ç”¨ç‰¹å®šæ–‡ä»¶ï¼Œæˆ‘ä¼šåŸºäºŽæ–‡ä»¶å†…å®¹ç»™ä½ æ›´å…·ä½“çš„å»ºè®®ã€‚`;\n        }\n        \n        resolve(response);\n      }, 1500);\n    });\n  };\n\n  // ç›‘å¬å¿«æ·é”®\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // æ£€æŸ¥Cmd+Kæˆ–Ctrl+K\n      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\n        e.preventDefault();\n        setIsCommandPaletteOpen(true);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  // å¤„ç†å·¦ä¾§è¾¹æ æ‹–æ‹½è°ƒæ•´å®½åº¦\n  const handleLeftResizeMouseDown = (e: React.MouseEvent) => {\n    e.preventDefault();\n    setIsLeftResizing(true);\n    leftResizingRef.current = {\n      startX: e.clientX,\n      startWidth: leftSidebarWidth\n    };\n  };\n\n  useEffect(() => {\n    const handleLeftResizeMouseMove = (e: MouseEvent) => {\n      if (!isLeftResizing || !leftResizingRef.current) return;\n      \n      const delta = e.clientX - leftResizingRef.current.startX;\n      const newWidth = Math.max(200, Math.min(500, leftResizingRef.current.startWidth + delta));\n      setLeftSidebarWidth(newWidth);\n    };\n\n    const handleLeftResizeMouseUp = () => {\n      setIsLeftResizing(false);\n      leftResizingRef.current = null;\n    };\n\n    if (isLeftResizing) {\n      document.addEventListener('mousemove', handleLeftResizeMouseMove);\n      document.addEventListener('mouseup', handleLeftResizeMouseUp);\n    }\n\n    return () => {\n      document.removeEventListener('mousemove', handleLeftResizeMouseMove);\n      document.removeEventListener('mouseup', handleLeftResizeMouseUp);\n    };\n  }, [isLeftResizing]);\n\n  // å¤„ç†å³ä¾§è¾¹æ æ‹–æ‹½è°ƒæ•´å®½åº¦\n  const handleResizeMouseDown = (e: React.MouseEvent) => {\n    e.preventDefault();\n    setIsResizing(true);\n    resizingRef.current = {\n      startX: e.clientX,\n      startWidth: rightSidebarWidth\n    };\n  };\n\n  useEffect(() => {\n    const handleResizeMouseMove = (e: MouseEvent) => {\n      if (!isResizing || !resizingRef.current) return;\n      \n      const delta = resizingRef.current.startX - e.clientX;\n      const newWidth = Math.max(280, Math.min(800, resizingRef.current.startWidth + delta));\n      setRightSidebarWidth(newWidth);\n    };\n\n    const handleResizeMouseUp = () => {\n      setIsResizing(false);\n      resizingRef.current = null;\n    };\n\n    if (isResizing) {\n      document.addEventListener('mousemove', handleResizeMouseMove);\n      document.addEventListener('mouseup', handleResizeMouseUp);\n    }\n\n    return () => {\n      document.removeEventListener('mousemove', handleResizeMouseMove);\n      document.removeEventListener('mouseup', handleResizeMouseUp);\n    };\n  }, [isResizing]);\n\n  // å®šä¹‰å¯ç”¨å‘½ä»¤ - æ·»åŠ ä¸Žæ ‘ç›¸å…³çš„å‘½ä»¤\n  const commands = [\n    {\n      id: 'new-file',\n      name: 'æ–°å»ºæ–‡ä»¶',\n      description: 'åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶',\n      icon: (\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n        </svg>\n      ),\n      action: () => {\n        const fileName = prompt('è¯·è¾“å…¥æ–‡ä»¶å:');\n        if (fileName && !openFiles.includes(fileName)) {\n          setOpenFiles(prev => [...prev, fileName]);\n          setFileContents(prev => ({\n            ...prev,\n            [fileName]: ''\n          }));\n          setCurrentFile(fileName);\n          toast.success(`æ–‡ä»¶ ${fileName} å·²åˆ›å»º`);\n        }\n      }\n    },\n    {\n      id: 'toggle-left-sidebar',\n      name: 'åˆ‡æ¢å·¦ä¾§æ ',\n      description: 'æ˜¾ç¤ºæˆ–éšè—å·¦ä¾§æ–‡ä»¶æ ',\n      icon: (\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h7\" />\n        </svg>\n      ),\n      action: () => {\n        setIsLeftSidebarCollapsed(!isLeftSidebarCollapsed);\n      }\n    },\n    {\n      id: 'toggle-right-sidebar',\n      name: 'åˆ‡æ¢AIåŠ©æ‰‹',\n      description: 'æ˜¾ç¤ºæˆ–éšè—å³ä¾§AIåŠ©æ‰‹',\n      icon: (\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\" />\n        </svg>\n      ),\n      action: () => {\n        setIsRightSidebarCollapsed(!isRightSidebarCollapsed);\n      }\n    },\n    {\n      id: 'ask-ai',\n      name: 'è¯¢é—®AI',\n      description: 'ç›´æŽ¥å‘AIåŠ©æ‰‹æé—®',\n      icon: (\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n        </svg>\n      ),\n      action: () => {\n        setIsRightSidebarCollapsed(false);\n        toast.info('è¯·åœ¨AIåŠ©æ‰‹æ ä¸­æé—®');\n      }\n    },\n    {\n      id: 'go-to-dashboard',\n      name: 'è¿”å›žä»»åŠ¡è®¡åˆ’',\n      description: 'è¿”å›žåˆ°ä»»åŠ¡è®¡åˆ’é¡µé¢',\n      icon: (\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n        </svg>\n      ),\n      action: () => {\n        handleReturnToDashboard();\n      }\n    },\n    {\n      id: 'view-tree',\n      name: 'æŸ¥çœ‹è¿›åº¦æ ‘',\n      description: 'æŸ¥çœ‹é¡¹ç›®è¿›åº¦å¯è§†åŒ–æ ‘',\n      icon: (\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n        </svg>\n      ),\n      action: () => {\n        setActiveTab('tree');\n        toast.success('å·²åˆ‡æ¢åˆ°è¿›åº¦æ ‘è§†å›¾');\n      }\n    },\n    {\n      id: 'view-files',\n      name: 'æŸ¥çœ‹æ–‡ä»¶',\n      description: 'æŸ¥çœ‹é¡¹ç›®æ–‡ä»¶',\n      icon: (\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n        </svg>\n      ),\n      action: () => {\n        setActiveTab('files');\n        toast.success('å·²åˆ‡æ¢åˆ°æ–‡ä»¶è§†å›¾');\n      }\n    }\n  ];\n\n  // æ¸²æŸ“è¡Œå·å’Œæ–‡æœ¬å†…å®¹\n  const renderFileContent = (content: string) => {\n    const lines = content.split('\\n');\n    return lines.map((line, index) => (\n      <div key={index} className=\"flex\">\n        <div className=\"text-gray-400 w-10 text-right pr-4 select-none\">{index + 1}</div>\n        <div>{line}</div>\n      </div>\n    ));\n  };\n\n  // è‡ªå®šä¹‰è¿”å›žä»ªè¡¨æ¿å‡½æ•°\n  const handleReturnToDashboard = () => {\n    // å¼ºåˆ¶é‡æ–°åŠ è½½é¡µé¢ä»¥ç¡®ä¿è®¡åˆ’æ˜¾ç¤º\n    window.location.href = '/dashboard?refresh=' + Date.now();\n  };\n\n  return (\n    <div className=\"h-screen flex flex-col bg-gray-50\">\n      {/* é¡¶éƒ¨å¯¼èˆªæ  - ç»Ÿä¸€é£Žæ ¼ä¸Ždashboard-page */}\n      <header className=\"bg-white border-b border-gray-200 sticky top-0 z-10\">\n        <div className=\"max-w-7xl mx-auto flex justify-between items-center px-4 py-3\">\n          {/* å·¦ä¾§LogoåŒºåŸŸ */}\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"bg-blue-600 text-white h-8 w-8 rounded flex items-center justify-center font-bold\">\n              L\n            </div>\n            <span className=\"font-semibold text-lg\">Linden AI</span>\n          </div>\n          \n          {/* ä¸­é—´æœç´¢æ  */}\n          <div className=\"hidden sm:flex flex-1 max-w-md mx-8\">\n            <div \n              className=\"relative w-full bg-gray-50 border border-gray-200 rounded-md flex items-center px-3 cursor-pointer\"\n              onClick={() => setIsCommandPaletteOpen(true)}\n            >\n              <svg className=\"h-5 w-5 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n              </svg>\n              <div className=\"w-full py-2 px-2 text-gray-400 text-sm\">\n                æœç´¢æˆ–ä½¿ç”¨å‘½ä»¤...\n              </div>\n              <div className=\"text-xs text-gray-400 bg-gray-100 px-1.5 py-0.5 rounded\">âŒ˜K</div>\n            </div>\n          </div>\n          \n          {/* å³ä¾§åŠŸèƒ½åŒº */}\n          <div className=\"flex items-center space-x-3\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"text-gray-700\"\n            >\n              EN\n            </Button>\n\n            <Button\n              variant=\"outline\"\n              className=\"border-blue-600 text-blue-600 hover:bg-blue-50\"\n              onClick={handleReturnToDashboard}\n            >\n              <svg className=\"w-5 h-5 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n              </svg>\n              è¿”å›žä»»åŠ¡è®¡åˆ’\n            </Button>\n\n            <div className=\"h-8 w-8 rounded-full bg-blue-600 text-white flex items-center justify-center cursor-pointer\">\n              <span>U</span>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* ä¸»ä½“å†…å®¹ */}\n      <div className=\"flex-1 flex overflow-hidden\">\n        {/* å·¦ä¾§è¾¹æ  - æ–‡ä»¶æµè§ˆ */}\n        <div \n          className={`bg-gray-800 text-white flex flex-col ${\n            isLeftSidebarCollapsed ? 'w-14' : ''\n          } ${isLeftResizing ? '' : 'transition-all duration-300'} border-r border-gray-700`}\n          style={{ width: isLeftSidebarCollapsed ? undefined : `${leftSidebarWidth}px` }}\n        >\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-700\">\n            <h2 className={`font-medium ${isLeftSidebarCollapsed ? 'hidden' : 'block'}`}>é¡¹ç›®å¯¼èˆª</h2>\n            <button \n              onClick={() => setIsLeftSidebarCollapsed(!isLeftSidebarCollapsed)}\n              className=\"text-gray-400 hover:text-white\"\n            >\n              {isLeftSidebarCollapsed ? (\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 5l7 7-7 7M5 5l7 7-7 7\" />\n                </svg>\n              ) : (\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 19l-7-7 7-7m8 14l-7-7 7-7\" />\n                </svg>\n              )}\n            </button>\n          </div>\n          \n          {/* å¯¼èˆªé¡¹ç›® */}\n          <div className=\"flex-1 overflow-auto p-2\">\n            {!isLeftSidebarCollapsed && (\n              <div className=\"py-2 space-y-1\">\n                {/* æ ‘è§†å›¾é€‰é¡¹ */}\n                <div \n                  className={`flex items-center ${activeTab === 'tree' ? 'text-white bg-gray-700' : 'text-gray-300 hover:text-white'} py-2 px-3 rounded hover:bg-gray-700 cursor-pointer`}\n                  onClick={() => setActiveTab('tree')}\n                >\n                  <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                  </svg>\n                  <span>è¿›åº¦æ ‘</span>\n                </div>\n                \n                {/* æ–‡ä»¶è§†å›¾é€‰é¡¹ */}\n                <div \n                  className={`flex items-center ${activeTab === 'files' ? 'text-white bg-gray-700' : 'text-gray-300 hover:text-white'} py-2 px-3 rounded hover:bg-gray-700 cursor-pointer`}\n                  onClick={() => setActiveTab('files')}\n                >\n                  <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                  </svg>\n                  <span>é¡¹ç›®æ–‡ä»¶</span>\n                </div>\n                \n                {/* æ–‡ä»¶åˆ—è¡¨ */}\n                {activeTab === 'files' && (\n                  <div className=\"mt-4 pl-2\">\n                    <div className=\"text-xs text-gray-400 uppercase font-semibold mb-2\">æ–‡ä»¶</div>\n                    {Object.keys(fileContents).map(fileName => (\n                      <div \n                        key={fileName}\n                        className={`flex items-center ${fileName === currentFile ? 'text-white bg-gray-700' : 'text-gray-300 hover:text-white'} py-1 px-2 rounded hover:bg-gray-700 cursor-pointer`}\n                        onClick={() => {\n                          setActiveTab('files');\n                          if (!openFiles.includes(fileName)) {\n                            setOpenFiles(prev => [...prev, fileName]);\n                          }\n                          setCurrentFile(fileName);\n                        }}\n                      >\n                        <svg className=\"w-4 h-4 mr-2 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n                        </svg>\n                        <span className=\"truncate text-sm\">{fileName}</span>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* å¯è°ƒæ•´å¤§å°çš„å·¦ä¾§åˆ†å‰²çº¿ */}\n        {!isLeftSidebarCollapsed && (\n          <div \n            className={`w-1.5 hover:bg-blue-300 cursor-col-resize relative ${isLeftResizing ? 'bg-blue-400' : 'bg-transparent'}`}\n            onMouseDown={handleLeftResizeMouseDown}\n            aria-label=\"è°ƒæ•´æ–‡ä»¶æµè§ˆå™¨å¤§å°\"\n          >\n            <div className=\"absolute inset-y-0 -left-1 -right-1\" />\n          </div>\n        )}\n\n        {/* ä¸­å¤®å·¥ä½œåŒº - æ ¹æ®activeTabæ˜¾ç¤ºä¸åŒå†…å®¹ */}\n        <div className=\"flex-1 overflow-auto bg-white flex flex-col\">\n          {activeTab === 'files' ? (\n            <>\n              {/* å·¥ä½œåŒºé¡¶éƒ¨æ ‡ç­¾æ  */}\n              <div className=\"flex items-center border-b border-gray-200 h-10 bg-gray-50\">\n                {openFiles.map(file => (\n                  <div \n                    key={file}\n                    className={`flex items-center px-4 py-1 border-r border-gray-200 text-gray-600 text-sm font-medium cursor-pointer ${\n                      file === currentFile ? 'bg-white border-b-2 border-b-blue-500' : 'hover:bg-gray-100'\n                    }`}\n                    onClick={() => setCurrentFile(file)}\n                  >\n                    {file}\n                    <button \n                      className=\"ml-2 text-gray-400 hover:text-gray-600\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        if (openFiles.length > 1) {\n                          setOpenFiles(prev => prev.filter(f => f !== file));\n                          if (currentFile === file) {\n                            setCurrentFile(openFiles.find(f => f !== file) || '');\n                          }\n                        }\n                      }}\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                      </svg>\n                    </button>\n                  </div>\n                ))}\n              </div>\n              \n              {/* ç¼–è¾‘åŒºåŸŸ */}\n              <div className=\"flex-1 overflow-auto p-6\">\n                <div className=\"max-w-4xl mx-auto\">\n                  <div className=\"font-mono text-sm text-gray-800 whitespace-pre-wrap\">\n                    {currentFile && fileContents[currentFile] ? \n                      renderFileContent(fileContents[currentFile]) : \n                      <div className=\"text-gray-400 text-center py-10\">æ²¡æœ‰æ‰“å¼€çš„æ–‡ä»¶</div>\n                    }\n                  </div>\n                </div>\n              </div>\n            </>\n          ) : (\n            /* æ ‘è§†å›¾ */\n            <ProjectTree \n              planTitle={planTitle || 'æœªå‘½åé¡¹ç›®'} \n              progress={treeProgress}\n              tasksCompleted={tasksCompleted}\n              totalTasks={totalTasks}\n              onTaskComplete={() => {\n                // æ›´æ–°ä»»åŠ¡å®Œæˆæ•°é‡\n                const newTasksCompleted = Math.min(tasksCompleted + 1, totalTasks);\n                setTasksCompleted(newTasksCompleted);\n                \n                // æ›´æ–°è¿›åº¦\n                const newProgress = Math.min(Math.round((newTasksCompleted / totalTasks) * 100), 100);\n                setTreeProgress(newProgress);\n                \n                // æ›´æ–°ä»»åŠ¡æ–‡ä»¶å†…å®¹ - å°†ç¬¬ä¸€ä¸ªæœªå®Œæˆçš„ä»»åŠ¡æ ‡è®°ä¸ºå·²å®Œæˆ\n                if (fileContents['tasks.md']) {\n                  const tasksMd = fileContents['tasks.md'];\n                  // æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæœªå®Œæˆçš„ä»»åŠ¡\n                  const updatedTasksMd = tasksMd.replace(\n                    /- \\[ \\] (.*)/,\n                    (match, p1) => `- [x] ${p1}`\n                  );\n                  \n                  setFileContents(prev => ({\n                    ...prev,\n                    'tasks.md': updatedTasksMd\n                  }));\n                }\n                \n                // æ˜¾ç¤ºæç¤º\n                toast.success('ðŸŒ± ä»»åŠ¡å·²å®Œæˆï¼æ ‘æˆé•¿äº†ä¸€ç‚¹ï¼', {\n                  duration: 3000,\n                  position: 'top-center',\n                });\n              }}\n            />\n          )}\n        </div>\n\n        {/* å¯è°ƒæ•´å¤§å°çš„å³ä¾§åˆ†å‰²çº¿ */}\n        {!isRightSidebarCollapsed && (\n          <div \n            className={`w-1.5 hover:bg-blue-300 cursor-col-resize relative ${isResizing ? 'bg-blue-400' : 'bg-transparent'}`}\n            onMouseDown={handleResizeMouseDown}\n            aria-label=\"è°ƒæ•´èŠå¤©çª—å£å¤§å°\"\n          >\n            <div className=\"absolute inset-y-0 -left-1 -right-1\" />\n          </div>\n        )}\n\n        {/* å³ä¾§è¾¹æ  - AIåŠ©æ‰‹ (Cursoré£Žæ ¼) */}\n        <div \n          className={`bg-white border-l border-gray-200 flex flex-col ${\n            isRightSidebarCollapsed ? 'w-14' : ''\n          } ${isResizing ? '' : 'transition-all duration-300'}`}\n          style={{ width: isRightSidebarCollapsed ? undefined : `${rightSidebarWidth}px` }}\n        >\n          {!isRightSidebarCollapsed && (\n            <div className=\"flex-1 overflow-hidden\">\n              <AIChat \n                initialMessages={generateInitialMessages()}\n                onSendMessage={handleSendMessage}\n                onClose={() => setIsRightSidebarCollapsed(true)}\n              />\n            </div>\n          )}\n          \n          {isRightSidebarCollapsed && (\n            <div className=\"h-full flex flex-col items-center pt-4\">\n              <button \n                className=\"text-blue-600 hover:text-blue-800\"\n                onClick={() => setIsRightSidebarCollapsed(false)}\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\" />\n                </svg>\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* å‘½ä»¤é¢æ¿ */}\n      <CommandPalette \n        isOpen={isCommandPaletteOpen}\n        onClose={() => setIsCommandPaletteOpen(false)}\n        commands={commands}\n      />\n    </div>\n  );\n};\n\nexport default WorkspacePage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}