{"ast":null,"code":"var _jsxFileName = \"/home/devbox/project/src/pages/workspace-page.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Button } from '../components/ui/button';\nimport AIChat from '../components/features/ai-chat/ai-chat';\nimport CommandPalette from '../components/features/command/command-palette';\nimport ProjectTree from '../components/features/tree-growth/project-tree';\nimport { toast } from 'sonner';\n\n// 从URL中获取参数的工具函数\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getQueryParams = () => {\n  const params = new URLSearchParams(window.location.search);\n  const plan = params.get('plan');\n  return {\n    plan: plan ? decodeURIComponent(plan) : null\n  };\n};\n\n// 文件内容类型定义\n\n// 工作区标签类型\n\nconst WorkspacePage = () => {\n  _s();\n  const location = useLocation();\n  const [activeTab, setActiveTab] = useState('tree'); // 默认显示树页面\n  const [isLeftSidebarCollapsed, setIsLeftSidebarCollapsed] = useState(false);\n  const [leftSidebarWidth, setLeftSidebarWidth] = useState(256); // Default width of 64 in rem (w-64)\n  const [isLeftResizing, setIsLeftResizing] = useState(false);\n  const leftResizingRef = useRef(null);\n  const [isRightSidebarCollapsed, setIsRightSidebarCollapsed] = useState(false);\n  const [rightSidebarWidth, setRightSidebarWidth] = useState(384); // Default width of 96 in rem (w-96)\n  const [isResizing, setIsResizing] = useState(false);\n  const resizingRef = useRef(null);\n  const [isCommandPaletteOpen, setIsCommandPaletteOpen] = useState(false);\n  const [openFiles, setOpenFiles] = useState(['workspace.txt']);\n  const [currentFile, setCurrentFile] = useState('workspace.txt');\n  const [planTitle, setPlanTitle] = useState(null);\n\n  // 树的进度状态\n  const [treeProgress, setTreeProgress] = useState(5); // 默认5%进度\n  const [tasksCompleted, setTasksCompleted] = useState(1);\n  const [totalTasks, setTotalTasks] = useState(10);\n\n  // 生成默认的文件内容\n  const generateDefaultFileContents = plan => {\n    const defaultContents = {\n      'workspace.txt': `# 任务计划 AI 工作区\n\n这是一个集成式AI工作环境，你可以：\n- 向AI提出关于任务的问题\n- 获取关于任务拆解的建议\n- 使用AI协助管理和优化你的任务计划\n\n## 使用方法\n\n1. 在右侧AI助手中提问\n2. 使用⌘K打开命令面板\n3. 使用@符号引用文件和资源`,\n      'project.json': `{\n  \"name\": \"任务计划\",\n  \"version\": \"1.0.0\",\n  \"description\": \"现代化的任务管理应用\",\n  \"framework\": \"React\",\n  \"components\": {\n    \"plans\": \"src/components/features/plan-tree/plan-tree.tsx\",\n    \"workspace\": \"src/pages/workspace-page.tsx\",\n    \"dashboard\": \"src/pages/dashboard-page.tsx\"\n  }\n}`\n    };\n\n    // 如果有计划标题，则添加计划相关文件\n    if (plan) {\n      defaultContents['plan-overview.md'] = `# ${plan}\n\n## 计划概述\n这是关于\"${plan}\"的任务计划。\n\n## 目标\n- 完成\"${plan}\"相关的所有必要任务\n- 按时高质量地交付成果\n- 保持进度可视化和可追踪\n\n## 时间线\n- 开始时间: ${new Date().toLocaleDateString()}\n- 预计完成: 待定\n`;\n      defaultContents['tasks.md'] = `# ${plan} - 任务清单\n\n## 待完成任务\n- [ ] 任务1: 定义\"${plan}\"的具体目标和范围\n- [ ] 任务2: 分解\"${plan}\"为可执行的小步骤\n- [ ] 任务3: 为每个步骤设定完成标准\n\n## 已完成任务\n- [x] 创建\"${plan}\"计划\n`;\n    }\n    return defaultContents;\n  };\n\n  // 获取计划信息并初始化文件内容\n  useEffect(() => {\n    const {\n      plan\n    } = getQueryParams();\n    if (plan) {\n      setPlanTitle(plan);\n      const newFileContents = generateDefaultFileContents(plan);\n      setFileContents(newFileContents);\n\n      // 打开计划相关文件\n      const planFiles = ['plan-overview.md', 'tasks.md'];\n      setOpenFiles(['plan-overview.md', ...openFiles.filter(file => !planFiles.includes(file))]);\n      setCurrentFile('plan-overview.md');\n\n      // 打开AI对话框\n      setIsRightSidebarCollapsed(false);\n\n      // 默认设置项目总任务数\n      setTotalTasks(10);\n    } else {\n      setFileContents(generateDefaultFileContents(null));\n    }\n  }, [location.search]);\n  const [fileContents, setFileContents] = useState(generateDefaultFileContents(null));\n\n  // 生成AI初始化消息\n  const generateInitialMessages = () => {\n    const defaultMessage = {\n      id: '1',\n      role: 'system',\n      content: '您好！我是AI助手，有什么我可以帮助您的吗？您可以使用@引用文件，也可以切换智能体模式和对话模式，或者选择不同的AI模型。',\n      timestamp: new Date()\n    };\n\n    // 如果有计划标题，添加计划相关的欢迎消息\n    if (planTitle) {\n      return [defaultMessage, {\n        id: '2',\n        role: 'assistant',\n        content: `您好！我看到您正在创建\"${planTitle}\"的任务计划。\n\n我已经为您初始化了两个文件：\n1. **plan-overview.md** - 包含计划概述和目标\n2. **tasks.md** - 包含待完成和已完成的任务清单\n\n您需要我帮您做什么？例如：\n- 帮您拆解\"${planTitle}\"任务为更小的步骤\n- 制定完成\"${planTitle}\"的时间线\n- 提供关于\"${planTitle}\"的最佳实践建议`,\n        timestamp: new Date()\n      }];\n    }\n    return [defaultMessage];\n  };\n\n  // 处理AI消息\n  const handleSendMessage = async (message, references) => {\n    // 检查是否是完成任务的消息\n    const taskCompleteRegex = /(完成|完成了|已完成|标记完成|已完成了|完成任务)\\s*([\\S\\s]*?)(任务|子任务|工作|事项)/i;\n    const isTaskComplete = taskCompleteRegex.test(message);\n\n    // 如果是完成任务的消息，更新树的进度\n    if (isTaskComplete) {\n      // 提取任务名称\n      const match = message.match(taskCompleteRegex);\n      const taskName = match && match[2] ? match[2].trim() : '一个';\n\n      // 更新进度\n      setTasksCompleted(prev => Math.min(prev + 1, totalTasks));\n      const newProgress = Math.min(Math.round((tasksCompleted + 1) / totalTasks * 100), 100);\n      setTreeProgress(newProgress);\n\n      // 更新任务文件内容\n      if (fileContents['tasks.md']) {\n        const tasksMd = fileContents['tasks.md'];\n        // 查找待完成任务列表中的任务，并将其移动到已完成任务列表\n        const updatedTasksMd = tasksMd.replace(/- \\[ \\] (.*)/, (match, p1) => {\n          if (p1.includes(taskName) || taskName === '一个') {\n            return `- [x] ${p1}`;\n          }\n          return match;\n        });\n        setFileContents(prev => ({\n          ...prev,\n          'tasks.md': updatedTasksMd\n        }));\n      }\n\n      // 在树增长时显示提示\n      toast.success(`🌱 任务\"${taskName}\"已完成！树成长了一点！`, {\n        duration: 3000,\n        position: 'top-center'\n      });\n    }\n\n    // 模拟AI响应\n    return new Promise(resolve => {\n      setTimeout(() => {\n        let response = '';\n\n        // 如果是完成任务的消息，提供特定的响应\n        if (isTaskComplete) {\n          response = `太棒了！我已将此任务标记为已完成。\n\n您的项目进度树也已经成长了一点 🌱\n\n当前进度：${treeProgress}%，已完成 ${tasksCompleted}/${totalTasks} 个任务。\n\n${treeProgress >= 100 ? '恭喜您完成了所有任务！🎉' : '继续努力，您正在取得良好的进展！'}\n\n有什么其他我可以帮您的吗？`;\n        }\n        // 根据消息内容和计划标题生成响应\n        else if (planTitle) {\n          if (message.toLowerCase().includes('拆解') || message.toLowerCase().includes('步骤')) {\n            response = `我可以帮你拆解\"${planTitle}\"任务。一个好的任务拆解应该包含以下几个步骤：\n\n1. 明确\"${planTitle}\"的具体目标和验收标准\n2. 将\"${planTitle}\"分解为3-5个主要阶段\n3. 在每个阶段内，确定具体的可执行任务\n4. 估计每个任务的时间和资源需求\n5. 确定任务之间的依赖关系\n6. 设置检查点和里程碑\n\n我已经在tasks.md文件中创建了初始任务列表，您可以根据上述步骤进一步细化任务。您想要我帮您详细拆解哪个方面的任务？`;\n          } else if (message.toLowerCase().includes('时间') || message.toLowerCase().includes('计划')) {\n            response = `对于\"${planTitle}\"这样的任务，我建议使用以下时间规划策略：\n\n1. 设置明确的最终截止日期\n2. 为每个主要阶段分配时间区间\n3. 在关键点设置缓冲时间，预防意外延迟\n4. 使用倒推法确定各任务的起始时间\n5. 每日/每周检查进度，及时调整计划\n\n您希望我帮您制定详细的时间线吗？如果是，请告诉我\"${planTitle}\"的预期完成日期。`;\n          } else if (message.toLowerCase().includes('最佳实践') || message.toLowerCase().includes('建议')) {\n            response = `关于\"${planTitle}\"，我有以下最佳实践建议：\n\n1. 使用SMART原则（具体、可衡量、可达成、相关、有时限）定义每个任务\n2. 设置清晰的优先级，先处理重要且紧急的任务\n3. 使用番茄工作法（25分钟专注+5分钟休息）提高效率\n4. 每日结束时回顾进度，计划第二天的任务\n5. 定期与相关方沟通进度，确保期望一致\n6. 使用工具如甘特图可视化进度\n\n这些实践可以帮助您更高效地完成\"${planTitle}\"。您想了解其中哪个方面的更多细节？`;\n          } else if (references && references.length > 0) {\n            // 如果有引用文件，基于文件内容和计划给出响应\n            const fileContent = references.map(file => fileContents[file] || `(无法读取文件 ${file})`).join('\\n\\n');\n            response = `我已分析了您引用的文件。以下是关于\"${planTitle}\"的建议：\n\n基于文件内容，我建议您：\n1. 进一步明确\"${planTitle}\"的具体目标和范围\n2. 确定完成\"${planTitle}\"的关键资源和依赖\n3. 设置清晰的完成标准和验收条件\n4. 考虑可能的风险和缓解措施\n\n您可以在plan-overview.md中补充这些信息，并在tasks.md中细化任务列表。需要我帮您制定具体的行动计划吗？`;\n          } else {\n            response = `关于\"${planTitle}\"任务，我可以帮您：\n\n- 详细拆解任务步骤\n- 制定时间线和里程碑\n- 提供最佳实践和效率建议\n- 分析潜在风险和解决方案\n- 帮您追踪和调整计划进度\n\n您想从哪个方面着手优化\"${planTitle}\"的计划？`;\n          }\n        } else if (message.toLowerCase().includes('任务拆解')) {\n          response = `我可以帮你拆解任务。一个好的任务拆解应该包含以下几个步骤：\n\n1. 明确任务目标\n2. 将大任务分解为小任务\n3. 评估每个小任务的优先级\n4. 设定每个小任务的完成时间\n5. 分配资源\n\n希望这对你有所帮助！`;\n        } else if (message.toLowerCase().includes('优化')) {\n          response = `要优化你的任务计划，可以考虑以下几点：\n\n1. 使用番茄工作法提高专注度\n2. 建立例行公事，减少决策疲劳\n3. 批量处理同类型的任务\n4. 定期回顾和调整你的计划\n5. 使用自动化工具减少重复工作`;\n        } else if (references && references.length > 0) {\n          // 如果有引用文件，基于文件内容给出响应\n          const fileContent = references.map(file => fileContents[file] || `(无法读取文件 ${file})`).join('\\n\\n');\n          response = `我已分析了你引用的文件。以下是我的发现：\n\n根据文件内容，这是一个使用React框架构建的任务管理应用。主要组件包括计划树(plan-tree)、工作区和仪表盘。\n\n我建议你可以：\n1. 检查组件之间的数据流是否清晰\n2. 确保状态管理逻辑集中且一致\n3. 考虑添加单元测试确保功能稳定性`;\n        } else {\n          response = `我是你的AI助手，可以帮助你:\n\n- 回答关于任务管理的问题\n- 提供任务拆解和优化建议\n- 分析项目文件和代码\n\n你可以尝试询问关于\"任务拆解\"或\"优化\"的问题，或者使用@引用特定文件，我会基于文件内容给你更具体的建议。`;\n        }\n        resolve(response);\n      }, 1500);\n    });\n  };\n\n  // 监听快捷键\n  useEffect(() => {\n    const handleKeyDown = e => {\n      // 检查Cmd+K或Ctrl+K\n      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\n        e.preventDefault();\n        setIsCommandPaletteOpen(true);\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  // 处理左侧边栏拖拽调整宽度\n  const handleLeftResizeMouseDown = e => {\n    e.preventDefault();\n    setIsLeftResizing(true);\n    leftResizingRef.current = {\n      startX: e.clientX,\n      startWidth: leftSidebarWidth\n    };\n  };\n  useEffect(() => {\n    const handleLeftResizeMouseMove = e => {\n      if (!isLeftResizing || !leftResizingRef.current) return;\n      const delta = e.clientX - leftResizingRef.current.startX;\n      const newWidth = Math.max(200, Math.min(500, leftResizingRef.current.startWidth + delta));\n      setLeftSidebarWidth(newWidth);\n    };\n    const handleLeftResizeMouseUp = () => {\n      setIsLeftResizing(false);\n      leftResizingRef.current = null;\n    };\n    if (isLeftResizing) {\n      document.addEventListener('mousemove', handleLeftResizeMouseMove);\n      document.addEventListener('mouseup', handleLeftResizeMouseUp);\n    }\n    return () => {\n      document.removeEventListener('mousemove', handleLeftResizeMouseMove);\n      document.removeEventListener('mouseup', handleLeftResizeMouseUp);\n    };\n  }, [isLeftResizing]);\n\n  // 处理右侧边栏拖拽调整宽度\n  const handleResizeMouseDown = e => {\n    e.preventDefault();\n    setIsResizing(true);\n    resizingRef.current = {\n      startX: e.clientX,\n      startWidth: rightSidebarWidth\n    };\n  };\n  useEffect(() => {\n    const handleResizeMouseMove = e => {\n      if (!isResizing || !resizingRef.current) return;\n      const delta = resizingRef.current.startX - e.clientX;\n      const newWidth = Math.max(280, Math.min(800, resizingRef.current.startWidth + delta));\n      setRightSidebarWidth(newWidth);\n    };\n    const handleResizeMouseUp = () => {\n      setIsResizing(false);\n      resizingRef.current = null;\n    };\n    if (isResizing) {\n      document.addEventListener('mousemove', handleResizeMouseMove);\n      document.addEventListener('mouseup', handleResizeMouseUp);\n    }\n    return () => {\n      document.removeEventListener('mousemove', handleResizeMouseMove);\n      document.removeEventListener('mouseup', handleResizeMouseUp);\n    };\n  }, [isResizing]);\n\n  // 渲染行号和文本内容\n  const renderFileContent = content => {\n    const lines = content.split('\\n');\n    return lines.map((line, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-gray-400 w-10 text-right pr-4 select-none\",\n        children: index + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: line\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 9\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 7\n    }, this));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen flex flex-col bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-white border-b border-gray-200 sticky top-0 z-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto flex justify-between items-center px-4 py-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-600 text-white h-8 w-8 rounded flex items-center justify-center font-bold\",\n            children: \"L\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold text-lg\",\n            children: \"Linden AI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hidden sm:flex flex-1 max-w-md mx-8\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative w-full bg-gray-50 border border-gray-200 rounded-md flex items-center px-3 cursor-pointer\",\n            onClick: () => setIsCommandPaletteOpen(true),\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-5 w-5 text-gray-400\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full py-2 px-2 text-gray-400 text-sm\",\n              children: \"\\u641C\\u7D22\\u6216\\u4F7F\\u7528\\u547D\\u4EE4...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-400 bg-gray-100 px-1.5 py-0.5 rounded\",\n              children: \"\\u2318K\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"ghost\",\n            size: \"sm\",\n            className: \"text-gray-700\",\n            children: \"EN\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            className: \"border-blue-600 text-blue-600 hover:bg-blue-50\",\n            onClick: () => window.location.href = '/dashboard',\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-5 h-5 mr-1\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 15\n            }, this), \"\\u8FD4\\u56DE\\u4EFB\\u52A1\\u8BA1\\u5212\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-8 w-8 rounded-full bg-blue-600 text-white flex items-center justify-center cursor-pointer\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"U\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bg-gray-800 text-white flex flex-col ${isLeftSidebarCollapsed ? 'w-14' : ''} ${isLeftResizing ? '' : 'transition-all duration-300'} border-r border-gray-700`,\n        style: {\n          width: isLeftSidebarCollapsed ? undefined : `${leftSidebarWidth}px`\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between p-4 border-b border-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: `font-medium ${isLeftSidebarCollapsed ? 'hidden' : 'block'}`,\n            children: \"\\u9879\\u76EE\\u5BFC\\u822A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsLeftSidebarCollapsed(!isLeftSidebarCollapsed),\n            className: \"text-gray-400 hover:text-white\",\n            children: isLeftSidebarCollapsed ? /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-5 h-5\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M13 5l7 7-7 7M5 5l7 7-7 7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-5 h-5\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M11 19l-7-7 7-7m8 14l-7-7 7-7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-auto p-2\",\n          children: !isLeftSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"py-2 space-y-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex items-center ${activeTab === 'tree' ? 'text-white bg-gray-700' : 'text-gray-300 hover:text-white'} py-2 px-3 rounded hover:bg-gray-700 cursor-pointer`,\n              onClick: () => setActiveTab('tree'),\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-5 h-5 mr-2\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 519,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 518,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u8FDB\\u5EA6\\u6811\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex items-center ${activeTab === 'files' ? 'text-white bg-gray-700' : 'text-gray-300 hover:text-white'} py-2 px-3 rounded hover:bg-gray-700 cursor-pointer`,\n              onClick: () => setActiveTab('files'),\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-5 h-5 mr-2\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 530,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 529,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u9879\\u76EE\\u6587\\u4EF6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 17\n            }, this), activeTab === 'files' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 pl-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-400 uppercase font-semibold mb-2\",\n                children: \"\\u6587\\u4EF6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 538,\n                columnNumber: 21\n              }, this), Object.keys(fileContents).map(fileName => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `flex items-center ${fileName === currentFile ? 'text-white bg-gray-700' : 'text-gray-300 hover:text-white'} py-1 px-2 rounded hover:bg-gray-700 cursor-pointer`,\n                onClick: () => {\n                  setActiveTab('files');\n                  if (!openFiles.includes(fileName)) {\n                    setOpenFiles(prev => [...prev, fileName]);\n                  }\n                  setCurrentFile(fileName);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-4 h-4 mr-2 flex-shrink-0\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 552,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 551,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"truncate text-sm\",\n                  children: fileName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 554,\n                  columnNumber: 25\n                }, this)]\n              }, fileName, true, {\n                fileName: _jsxFileName,\n                lineNumber: 540,\n                columnNumber: 23\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 537,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 9\n      }, this), !isLeftSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `w-1.5 hover:bg-blue-300 cursor-col-resize relative ${isLeftResizing ? 'bg-blue-400' : 'bg-transparent'}`,\n        onMouseDown: handleLeftResizeMouseDown,\n        \"aria-label\": \"\\u8C03\\u6574\\u6587\\u4EF6\\u6D4F\\u89C8\\u5668\\u5927\\u5C0F\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-y-0 -left-1 -right-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-auto bg-white flex flex-col\",\n        children: activeTab === 'files' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center border-b border-gray-200 h-10 bg-gray-50\",\n            children: openFiles.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex items-center px-4 py-1 border-r border-gray-200 text-gray-600 text-sm font-medium cursor-pointer ${file === currentFile ? 'bg-white border-b-2 border-b-blue-500' : 'hover:bg-gray-100'}`,\n              onClick: () => setCurrentFile(file),\n              children: [file, /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"ml-2 text-gray-400 hover:text-gray-600\",\n                onClick: e => {\n                  e.stopPropagation();\n                  if (openFiles.length > 1) {\n                    setOpenFiles(prev => prev.filter(f => f !== file));\n                    if (currentFile === file) {\n                      setCurrentFile(openFiles.find(f => f !== file) || '');\n                    }\n                  }\n                },\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-4 h-4\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M6 18L18 6M6 6l12 12\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 603,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 602,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 590,\n                columnNumber: 21\n              }, this)]\n            }, file, true, {\n              fileName: _jsxFileName,\n              lineNumber: 582,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 overflow-auto p-6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"max-w-4xl mx-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-mono text-sm text-gray-800 whitespace-pre-wrap\",\n                children: currentFile && fileContents[currentFile] ? renderFileContent(fileContents[currentFile]) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-gray-400 text-center py-10\",\n                  children: \"\\u6CA1\\u6709\\u6253\\u5F00\\u7684\\u6587\\u4EF6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 616,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 613,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 612,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) :\n        /*#__PURE__*/\n        /* 树视图 */\n        _jsxDEV(ProjectTree, {\n          planTitle: planTitle || '未命名项目',\n          progress: treeProgress,\n          tasksCompleted: tasksCompleted,\n          totalTasks: totalTasks\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 576,\n        columnNumber: 9\n      }, this), !isRightSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `w-1.5 hover:bg-blue-300 cursor-col-resize relative ${isResizing ? 'bg-blue-400' : 'bg-transparent'}`,\n        onMouseDown: handleResizeMouseDown,\n        \"aria-label\": \"\\u8C03\\u6574\\u804A\\u5929\\u7A97\\u53E3\\u5927\\u5C0F\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-y-0 -left-1 -right-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 640,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bg-white border-l border-gray-200 flex flex-col ${isRightSidebarCollapsed ? 'w-14' : ''} ${isResizing ? '' : 'transition-all duration-300'}`,\n        style: {\n          width: isRightSidebarCollapsed ? undefined : `${rightSidebarWidth}px`\n        },\n        children: [!isRightSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-hidden\",\n          children: /*#__PURE__*/_jsxDEV(AIChat, {\n            initialMessages: generateInitialMessages(),\n            onSendMessage: handleSendMessage,\n            onClose: () => setIsRightSidebarCollapsed(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 653,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 652,\n          columnNumber: 13\n        }, this), isRightSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-full flex flex-col items-center pt-4\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"text-blue-600 hover:text-blue-800\",\n            onClick: () => setIsRightSidebarCollapsed(false),\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-6 h-6\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 668,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 667,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 663,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 645,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CommandPalette, {\n      isOpen: isCommandPaletteOpen,\n      onClose: () => setIsCommandPaletteOpen(false),\n      commands: commands\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 677,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 426,\n    columnNumber: 5\n  }, this);\n};\n_s(WorkspacePage, \"D7TEoCE/ZC243B/snPkjNElNNsg=\", false, function () {\n  return [useLocation];\n});\n_c = WorkspacePage;\nexport default WorkspacePage;\nvar _c;\n$RefreshReg$(_c, \"WorkspacePage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useLocation","Button","AIChat","CommandPalette","ProjectTree","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","getQueryParams","params","URLSearchParams","window","location","search","plan","get","decodeURIComponent","WorkspacePage","_s","activeTab","setActiveTab","isLeftSidebarCollapsed","setIsLeftSidebarCollapsed","leftSidebarWidth","setLeftSidebarWidth","isLeftResizing","setIsLeftResizing","leftResizingRef","isRightSidebarCollapsed","setIsRightSidebarCollapsed","rightSidebarWidth","setRightSidebarWidth","isResizing","setIsResizing","resizingRef","isCommandPaletteOpen","setIsCommandPaletteOpen","openFiles","setOpenFiles","currentFile","setCurrentFile","planTitle","setPlanTitle","treeProgress","setTreeProgress","tasksCompleted","setTasksCompleted","totalTasks","setTotalTasks","generateDefaultFileContents","defaultContents","Date","toLocaleDateString","newFileContents","setFileContents","planFiles","filter","file","includes","fileContents","generateInitialMessages","defaultMessage","id","role","content","timestamp","handleSendMessage","message","references","taskCompleteRegex","isTaskComplete","test","match","taskName","trim","prev","Math","min","newProgress","round","tasksMd","updatedTasksMd","replace","p1","success","duration","position","Promise","resolve","setTimeout","response","toLowerCase","length","fileContent","map","join","handleKeyDown","e","metaKey","ctrlKey","key","preventDefault","addEventListener","removeEventListener","handleLeftResizeMouseDown","current","startX","clientX","startWidth","handleLeftResizeMouseMove","delta","newWidth","max","handleLeftResizeMouseUp","document","handleResizeMouseDown","handleResizeMouseMove","handleResizeMouseUp","renderFileContent","lines","split","line","index","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","variant","size","href","style","width","undefined","Object","keys","onMouseDown","stopPropagation","f","find","progress","initialMessages","onSendMessage","onClose","isOpen","commands","_c","$RefreshReg$"],"sources":["/home/devbox/project/src/pages/workspace-page.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Button } from '../components/ui/button';\nimport AIChat, { Message } from '../components/features/ai-chat/ai-chat';\nimport CommandPalette from '../components/features/command/command-palette';\nimport ProjectTree from '../components/features/tree-growth/project-tree';\nimport { toast } from 'sonner';\n\n// 从URL中获取参数的工具函数\nconst getQueryParams = () => {\n  const params = new URLSearchParams(window.location.search);\n  const plan = params.get('plan');\n  return {\n    plan: plan ? decodeURIComponent(plan) : null\n  };\n};\n\n// 文件内容类型定义\ninterface FileContents {\n  [key: string]: string;\n}\n\n// 工作区标签类型\ntype WorkspaceTab = 'tree' | 'files';\n\nconst WorkspacePage: React.FC = () => {\n  const location = useLocation();\n  const [activeTab, setActiveTab] = useState<WorkspaceTab>('tree'); // 默认显示树页面\n  const [isLeftSidebarCollapsed, setIsLeftSidebarCollapsed] = useState(false);\n  const [leftSidebarWidth, setLeftSidebarWidth] = useState(256); // Default width of 64 in rem (w-64)\n  const [isLeftResizing, setIsLeftResizing] = useState(false);\n  const leftResizingRef = useRef<{ startX: number; startWidth: number } | null>(null);\n  \n  const [isRightSidebarCollapsed, setIsRightSidebarCollapsed] = useState(false);\n  const [rightSidebarWidth, setRightSidebarWidth] = useState(384); // Default width of 96 in rem (w-96)\n  const [isResizing, setIsResizing] = useState(false);\n  const resizingRef = useRef<{ startX: number; startWidth: number } | null>(null);\n  \n  const [isCommandPaletteOpen, setIsCommandPaletteOpen] = useState(false);\n  const [openFiles, setOpenFiles] = useState(['workspace.txt']);\n  const [currentFile, setCurrentFile] = useState('workspace.txt');\n  const [planTitle, setPlanTitle] = useState<string | null>(null);\n  \n  // 树的进度状态\n  const [treeProgress, setTreeProgress] = useState(5); // 默认5%进度\n  const [tasksCompleted, setTasksCompleted] = useState(1);\n  const [totalTasks, setTotalTasks] = useState(10);\n  \n  // 生成默认的文件内容\n  const generateDefaultFileContents = (plan: string | null) => {\n    const defaultContents: FileContents = {\n      'workspace.txt': `# 任务计划 AI 工作区\n\n这是一个集成式AI工作环境，你可以：\n- 向AI提出关于任务的问题\n- 获取关于任务拆解的建议\n- 使用AI协助管理和优化你的任务计划\n\n## 使用方法\n\n1. 在右侧AI助手中提问\n2. 使用⌘K打开命令面板\n3. 使用@符号引用文件和资源`,\n      'project.json': `{\n  \"name\": \"任务计划\",\n  \"version\": \"1.0.0\",\n  \"description\": \"现代化的任务管理应用\",\n  \"framework\": \"React\",\n  \"components\": {\n    \"plans\": \"src/components/features/plan-tree/plan-tree.tsx\",\n    \"workspace\": \"src/pages/workspace-page.tsx\",\n    \"dashboard\": \"src/pages/dashboard-page.tsx\"\n  }\n}`\n    };\n    \n    // 如果有计划标题，则添加计划相关文件\n    if (plan) {\n      defaultContents['plan-overview.md'] = `# ${plan}\n\n## 计划概述\n这是关于\"${plan}\"的任务计划。\n\n## 目标\n- 完成\"${plan}\"相关的所有必要任务\n- 按时高质量地交付成果\n- 保持进度可视化和可追踪\n\n## 时间线\n- 开始时间: ${new Date().toLocaleDateString()}\n- 预计完成: 待定\n`;\n\n      defaultContents['tasks.md'] = `# ${plan} - 任务清单\n\n## 待完成任务\n- [ ] 任务1: 定义\"${plan}\"的具体目标和范围\n- [ ] 任务2: 分解\"${plan}\"为可执行的小步骤\n- [ ] 任务3: 为每个步骤设定完成标准\n\n## 已完成任务\n- [x] 创建\"${plan}\"计划\n`;\n    }\n    \n    return defaultContents;\n  };\n  \n  // 获取计划信息并初始化文件内容\n  useEffect(() => {\n    const { plan } = getQueryParams();\n    if (plan) {\n      setPlanTitle(plan);\n      const newFileContents = generateDefaultFileContents(plan);\n      setFileContents(newFileContents);\n      \n      // 打开计划相关文件\n      const planFiles = ['plan-overview.md', 'tasks.md'];\n      setOpenFiles(['plan-overview.md', ...openFiles.filter(file => !planFiles.includes(file))]);\n      setCurrentFile('plan-overview.md');\n      \n      // 打开AI对话框\n      setIsRightSidebarCollapsed(false);\n      \n      // 默认设置项目总任务数\n      setTotalTasks(10);\n    } else {\n      setFileContents(generateDefaultFileContents(null));\n    }\n  }, [location.search]);\n\n  const [fileContents, setFileContents] = useState<FileContents>(generateDefaultFileContents(null));\n\n  // 生成AI初始化消息\n  const generateInitialMessages = (): Message[] => {\n    const defaultMessage: Message = {\n      id: '1',\n      role: 'system' as const,\n      content: '您好！我是AI助手，有什么我可以帮助您的吗？您可以使用@引用文件，也可以切换智能体模式和对话模式，或者选择不同的AI模型。',\n      timestamp: new Date()\n    };\n    \n    // 如果有计划标题，添加计划相关的欢迎消息\n    if (planTitle) {\n      return [\n        defaultMessage,\n        {\n          id: '2',\n          role: 'assistant' as const,\n          content: `您好！我看到您正在创建\"${planTitle}\"的任务计划。\n\n我已经为您初始化了两个文件：\n1. **plan-overview.md** - 包含计划概述和目标\n2. **tasks.md** - 包含待完成和已完成的任务清单\n\n您需要我帮您做什么？例如：\n- 帮您拆解\"${planTitle}\"任务为更小的步骤\n- 制定完成\"${planTitle}\"的时间线\n- 提供关于\"${planTitle}\"的最佳实践建议`,\n          timestamp: new Date()\n        }\n      ];\n    }\n    \n    return [defaultMessage];\n  };\n\n  // 处理AI消息\n  const handleSendMessage = async (message: string, references?: string[]): Promise<string> => {\n    // 检查是否是完成任务的消息\n    const taskCompleteRegex = /(完成|完成了|已完成|标记完成|已完成了|完成任务)\\s*([\\S\\s]*?)(任务|子任务|工作|事项)/i;\n    const isTaskComplete = taskCompleteRegex.test(message);\n    \n    // 如果是完成任务的消息，更新树的进度\n    if (isTaskComplete) {\n      // 提取任务名称\n      const match = message.match(taskCompleteRegex);\n      const taskName = match && match[2] ? match[2].trim() : '一个';\n      \n      // 更新进度\n      setTasksCompleted(prev => Math.min(prev + 1, totalTasks));\n      const newProgress = Math.min(Math.round((tasksCompleted + 1) / totalTasks * 100), 100);\n      setTreeProgress(newProgress);\n      \n      // 更新任务文件内容\n      if (fileContents['tasks.md']) {\n        const tasksMd = fileContents['tasks.md'];\n        // 查找待完成任务列表中的任务，并将其移动到已完成任务列表\n        const updatedTasksMd = tasksMd.replace(\n          /- \\[ \\] (.*)/,\n          (match, p1) => {\n            if (p1.includes(taskName) || taskName === '一个') {\n              return `- [x] ${p1}`;\n            }\n            return match;\n          }\n        );\n        \n        setFileContents(prev => ({\n          ...prev,\n          'tasks.md': updatedTasksMd\n        }));\n      }\n      \n      // 在树增长时显示提示\n      toast.success(`🌱 任务\"${taskName}\"已完成！树成长了一点！`, {\n        duration: 3000,\n        position: 'top-center',\n      });\n    }\n    \n    // 模拟AI响应\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        let response = '';\n        \n        // 如果是完成任务的消息，提供特定的响应\n        if (isTaskComplete) {\n          response = `太棒了！我已将此任务标记为已完成。\n\n您的项目进度树也已经成长了一点 🌱\n\n当前进度：${treeProgress}%，已完成 ${tasksCompleted}/${totalTasks} 个任务。\n\n${treeProgress >= 100 ? '恭喜您完成了所有任务！🎉' : '继续努力，您正在取得良好的进展！'}\n\n有什么其他我可以帮您的吗？`;\n        }\n        // 根据消息内容和计划标题生成响应\n        else if (planTitle) {\n          if (message.toLowerCase().includes('拆解') || message.toLowerCase().includes('步骤')) {\n            response = `我可以帮你拆解\"${planTitle}\"任务。一个好的任务拆解应该包含以下几个步骤：\n\n1. 明确\"${planTitle}\"的具体目标和验收标准\n2. 将\"${planTitle}\"分解为3-5个主要阶段\n3. 在每个阶段内，确定具体的可执行任务\n4. 估计每个任务的时间和资源需求\n5. 确定任务之间的依赖关系\n6. 设置检查点和里程碑\n\n我已经在tasks.md文件中创建了初始任务列表，您可以根据上述步骤进一步细化任务。您想要我帮您详细拆解哪个方面的任务？`;\n          } else if (message.toLowerCase().includes('时间') || message.toLowerCase().includes('计划')) {\n            response = `对于\"${planTitle}\"这样的任务，我建议使用以下时间规划策略：\n\n1. 设置明确的最终截止日期\n2. 为每个主要阶段分配时间区间\n3. 在关键点设置缓冲时间，预防意外延迟\n4. 使用倒推法确定各任务的起始时间\n5. 每日/每周检查进度，及时调整计划\n\n您希望我帮您制定详细的时间线吗？如果是，请告诉我\"${planTitle}\"的预期完成日期。`;\n          } else if (message.toLowerCase().includes('最佳实践') || message.toLowerCase().includes('建议')) {\n            response = `关于\"${planTitle}\"，我有以下最佳实践建议：\n\n1. 使用SMART原则（具体、可衡量、可达成、相关、有时限）定义每个任务\n2. 设置清晰的优先级，先处理重要且紧急的任务\n3. 使用番茄工作法（25分钟专注+5分钟休息）提高效率\n4. 每日结束时回顾进度，计划第二天的任务\n5. 定期与相关方沟通进度，确保期望一致\n6. 使用工具如甘特图可视化进度\n\n这些实践可以帮助您更高效地完成\"${planTitle}\"。您想了解其中哪个方面的更多细节？`;\n          } else if (references && references.length > 0) {\n            // 如果有引用文件，基于文件内容和计划给出响应\n            const fileContent = references.map(file => fileContents[file] || `(无法读取文件 ${file})`).join('\\n\\n');\n            response = `我已分析了您引用的文件。以下是关于\"${planTitle}\"的建议：\n\n基于文件内容，我建议您：\n1. 进一步明确\"${planTitle}\"的具体目标和范围\n2. 确定完成\"${planTitle}\"的关键资源和依赖\n3. 设置清晰的完成标准和验收条件\n4. 考虑可能的风险和缓解措施\n\n您可以在plan-overview.md中补充这些信息，并在tasks.md中细化任务列表。需要我帮您制定具体的行动计划吗？`;\n          } else {\n            response = `关于\"${planTitle}\"任务，我可以帮您：\n\n- 详细拆解任务步骤\n- 制定时间线和里程碑\n- 提供最佳实践和效率建议\n- 分析潜在风险和解决方案\n- 帮您追踪和调整计划进度\n\n您想从哪个方面着手优化\"${planTitle}\"的计划？`;\n          }\n        } else if (message.toLowerCase().includes('任务拆解')) {\n          response = `我可以帮你拆解任务。一个好的任务拆解应该包含以下几个步骤：\n\n1. 明确任务目标\n2. 将大任务分解为小任务\n3. 评估每个小任务的优先级\n4. 设定每个小任务的完成时间\n5. 分配资源\n\n希望这对你有所帮助！`;\n        } else if (message.toLowerCase().includes('优化')) {\n          response = `要优化你的任务计划，可以考虑以下几点：\n\n1. 使用番茄工作法提高专注度\n2. 建立例行公事，减少决策疲劳\n3. 批量处理同类型的任务\n4. 定期回顾和调整你的计划\n5. 使用自动化工具减少重复工作`;\n        } else if (references && references.length > 0) {\n          // 如果有引用文件，基于文件内容给出响应\n          const fileContent = references.map(file => fileContents[file] || `(无法读取文件 ${file})`).join('\\n\\n');\n          response = `我已分析了你引用的文件。以下是我的发现：\n\n根据文件内容，这是一个使用React框架构建的任务管理应用。主要组件包括计划树(plan-tree)、工作区和仪表盘。\n\n我建议你可以：\n1. 检查组件之间的数据流是否清晰\n2. 确保状态管理逻辑集中且一致\n3. 考虑添加单元测试确保功能稳定性`;\n        } else {\n          response = `我是你的AI助手，可以帮助你:\n\n- 回答关于任务管理的问题\n- 提供任务拆解和优化建议\n- 分析项目文件和代码\n\n你可以尝试询问关于\"任务拆解\"或\"优化\"的问题，或者使用@引用特定文件，我会基于文件内容给你更具体的建议。`;\n        }\n        \n        resolve(response);\n      }, 1500);\n    });\n  };\n\n  // 监听快捷键\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // 检查Cmd+K或Ctrl+K\n      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\n        e.preventDefault();\n        setIsCommandPaletteOpen(true);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  // 处理左侧边栏拖拽调整宽度\n  const handleLeftResizeMouseDown = (e: React.MouseEvent) => {\n    e.preventDefault();\n    setIsLeftResizing(true);\n    leftResizingRef.current = {\n      startX: e.clientX,\n      startWidth: leftSidebarWidth\n    };\n  };\n\n  useEffect(() => {\n    const handleLeftResizeMouseMove = (e: MouseEvent) => {\n      if (!isLeftResizing || !leftResizingRef.current) return;\n      \n      const delta = e.clientX - leftResizingRef.current.startX;\n      const newWidth = Math.max(200, Math.min(500, leftResizingRef.current.startWidth + delta));\n      setLeftSidebarWidth(newWidth);\n    };\n\n    const handleLeftResizeMouseUp = () => {\n      setIsLeftResizing(false);\n      leftResizingRef.current = null;\n    };\n\n    if (isLeftResizing) {\n      document.addEventListener('mousemove', handleLeftResizeMouseMove);\n      document.addEventListener('mouseup', handleLeftResizeMouseUp);\n    }\n\n    return () => {\n      document.removeEventListener('mousemove', handleLeftResizeMouseMove);\n      document.removeEventListener('mouseup', handleLeftResizeMouseUp);\n    };\n  }, [isLeftResizing]);\n\n  // 处理右侧边栏拖拽调整宽度\n  const handleResizeMouseDown = (e: React.MouseEvent) => {\n    e.preventDefault();\n    setIsResizing(true);\n    resizingRef.current = {\n      startX: e.clientX,\n      startWidth: rightSidebarWidth\n    };\n  };\n\n  useEffect(() => {\n    const handleResizeMouseMove = (e: MouseEvent) => {\n      if (!isResizing || !resizingRef.current) return;\n      \n      const delta = resizingRef.current.startX - e.clientX;\n      const newWidth = Math.max(280, Math.min(800, resizingRef.current.startWidth + delta));\n      setRightSidebarWidth(newWidth);\n    };\n\n    const handleResizeMouseUp = () => {\n      setIsResizing(false);\n      resizingRef.current = null;\n    };\n\n    if (isResizing) {\n      document.addEventListener('mousemove', handleResizeMouseMove);\n      document.addEventListener('mouseup', handleResizeMouseUp);\n    }\n\n    return () => {\n      document.removeEventListener('mousemove', handleResizeMouseMove);\n      document.removeEventListener('mouseup', handleResizeMouseUp);\n    };\n  }, [isResizing]);\n\n  // 渲染行号和文本内容\n  const renderFileContent = (content: string) => {\n    const lines = content.split('\\n');\n    return lines.map((line, index) => (\n      <div key={index} className=\"flex\">\n        <div className=\"text-gray-400 w-10 text-right pr-4 select-none\">{index + 1}</div>\n        <div>{line}</div>\n      </div>\n    ));\n  };\n\n  return (\n    <div className=\"h-screen flex flex-col bg-gray-50\">\n      {/* 顶部导航栏 - 统一风格与dashboard-page */}\n      <header className=\"bg-white border-b border-gray-200 sticky top-0 z-10\">\n        <div className=\"max-w-7xl mx-auto flex justify-between items-center px-4 py-3\">\n          {/* 左侧Logo区域 */}\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"bg-blue-600 text-white h-8 w-8 rounded flex items-center justify-center font-bold\">\n              L\n            </div>\n            <span className=\"font-semibold text-lg\">Linden AI</span>\n          </div>\n          \n          {/* 中间搜索栏 */}\n          <div className=\"hidden sm:flex flex-1 max-w-md mx-8\">\n            <div \n              className=\"relative w-full bg-gray-50 border border-gray-200 rounded-md flex items-center px-3 cursor-pointer\"\n              onClick={() => setIsCommandPaletteOpen(true)}\n            >\n              <svg className=\"h-5 w-5 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n              </svg>\n              <div className=\"w-full py-2 px-2 text-gray-400 text-sm\">\n                搜索或使用命令...\n              </div>\n              <div className=\"text-xs text-gray-400 bg-gray-100 px-1.5 py-0.5 rounded\">⌘K</div>\n            </div>\n          </div>\n          \n          {/* 右侧功能区 */}\n          <div className=\"flex items-center space-x-3\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"text-gray-700\"\n            >\n              EN\n            </Button>\n\n            <Button\n              variant=\"outline\"\n              className=\"border-blue-600 text-blue-600 hover:bg-blue-50\"\n              onClick={() => window.location.href = '/dashboard'}\n            >\n              <svg className=\"w-5 h-5 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n              </svg>\n              返回任务计划\n            </Button>\n\n            <div className=\"h-8 w-8 rounded-full bg-blue-600 text-white flex items-center justify-center cursor-pointer\">\n              <span>U</span>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* 主体内容 */}\n      <div className=\"flex-1 flex overflow-hidden\">\n        {/* 左侧边栏 - 文件浏览 */}\n        <div \n          className={`bg-gray-800 text-white flex flex-col ${\n            isLeftSidebarCollapsed ? 'w-14' : ''\n          } ${isLeftResizing ? '' : 'transition-all duration-300'} border-r border-gray-700`}\n          style={{ width: isLeftSidebarCollapsed ? undefined : `${leftSidebarWidth}px` }}\n        >\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-700\">\n            <h2 className={`font-medium ${isLeftSidebarCollapsed ? 'hidden' : 'block'}`}>项目导航</h2>\n            <button \n              onClick={() => setIsLeftSidebarCollapsed(!isLeftSidebarCollapsed)}\n              className=\"text-gray-400 hover:text-white\"\n            >\n              {isLeftSidebarCollapsed ? (\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 5l7 7-7 7M5 5l7 7-7 7\" />\n                </svg>\n              ) : (\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 19l-7-7 7-7m8 14l-7-7 7-7\" />\n                </svg>\n              )}\n            </button>\n          </div>\n          \n          {/* 导航项目 */}\n          <div className=\"flex-1 overflow-auto p-2\">\n            {!isLeftSidebarCollapsed && (\n              <div className=\"py-2 space-y-1\">\n                {/* 树视图选项 */}\n                <div \n                  className={`flex items-center ${activeTab === 'tree' ? 'text-white bg-gray-700' : 'text-gray-300 hover:text-white'} py-2 px-3 rounded hover:bg-gray-700 cursor-pointer`}\n                  onClick={() => setActiveTab('tree')}\n                >\n                  <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                  </svg>\n                  <span>进度树</span>\n                </div>\n                \n                {/* 文件视图选项 */}\n                <div \n                  className={`flex items-center ${activeTab === 'files' ? 'text-white bg-gray-700' : 'text-gray-300 hover:text-white'} py-2 px-3 rounded hover:bg-gray-700 cursor-pointer`}\n                  onClick={() => setActiveTab('files')}\n                >\n                  <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                  </svg>\n                  <span>项目文件</span>\n                </div>\n                \n                {/* 文件列表 */}\n                {activeTab === 'files' && (\n                  <div className=\"mt-4 pl-2\">\n                    <div className=\"text-xs text-gray-400 uppercase font-semibold mb-2\">文件</div>\n                    {Object.keys(fileContents).map(fileName => (\n                      <div \n                        key={fileName}\n                        className={`flex items-center ${fileName === currentFile ? 'text-white bg-gray-700' : 'text-gray-300 hover:text-white'} py-1 px-2 rounded hover:bg-gray-700 cursor-pointer`}\n                        onClick={() => {\n                          setActiveTab('files');\n                          if (!openFiles.includes(fileName)) {\n                            setOpenFiles(prev => [...prev, fileName]);\n                          }\n                          setCurrentFile(fileName);\n                        }}\n                      >\n                        <svg className=\"w-4 h-4 mr-2 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n                        </svg>\n                        <span className=\"truncate text-sm\">{fileName}</span>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* 可调整大小的左侧分割线 */}\n        {!isLeftSidebarCollapsed && (\n          <div \n            className={`w-1.5 hover:bg-blue-300 cursor-col-resize relative ${isLeftResizing ? 'bg-blue-400' : 'bg-transparent'}`}\n            onMouseDown={handleLeftResizeMouseDown}\n            aria-label=\"调整文件浏览器大小\"\n          >\n            <div className=\"absolute inset-y-0 -left-1 -right-1\" />\n          </div>\n        )}\n\n        {/* 中央工作区 - 根据activeTab显示不同内容 */}\n        <div className=\"flex-1 overflow-auto bg-white flex flex-col\">\n          {activeTab === 'files' ? (\n            <>\n              {/* 工作区顶部标签栏 */}\n              <div className=\"flex items-center border-b border-gray-200 h-10 bg-gray-50\">\n                {openFiles.map(file => (\n                  <div \n                    key={file}\n                    className={`flex items-center px-4 py-1 border-r border-gray-200 text-gray-600 text-sm font-medium cursor-pointer ${\n                      file === currentFile ? 'bg-white border-b-2 border-b-blue-500' : 'hover:bg-gray-100'\n                    }`}\n                    onClick={() => setCurrentFile(file)}\n                  >\n                    {file}\n                    <button \n                      className=\"ml-2 text-gray-400 hover:text-gray-600\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        if (openFiles.length > 1) {\n                          setOpenFiles(prev => prev.filter(f => f !== file));\n                          if (currentFile === file) {\n                            setCurrentFile(openFiles.find(f => f !== file) || '');\n                          }\n                        }\n                      }}\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                      </svg>\n                    </button>\n                  </div>\n                ))}\n              </div>\n              \n              {/* 编辑区域 */}\n              <div className=\"flex-1 overflow-auto p-6\">\n                <div className=\"max-w-4xl mx-auto\">\n                  <div className=\"font-mono text-sm text-gray-800 whitespace-pre-wrap\">\n                    {currentFile && fileContents[currentFile] ? \n                      renderFileContent(fileContents[currentFile]) : \n                      <div className=\"text-gray-400 text-center py-10\">没有打开的文件</div>\n                    }\n                  </div>\n                </div>\n              </div>\n            </>\n          ) : (\n            /* 树视图 */\n            <ProjectTree \n              planTitle={planTitle || '未命名项目'} \n              progress={treeProgress}\n              tasksCompleted={tasksCompleted}\n              totalTasks={totalTasks}\n            />\n          )}\n        </div>\n\n        {/* 可调整大小的右侧分割线 */}\n        {!isRightSidebarCollapsed && (\n          <div \n            className={`w-1.5 hover:bg-blue-300 cursor-col-resize relative ${isResizing ? 'bg-blue-400' : 'bg-transparent'}`}\n            onMouseDown={handleResizeMouseDown}\n            aria-label=\"调整聊天窗口大小\"\n          >\n            <div className=\"absolute inset-y-0 -left-1 -right-1\" />\n          </div>\n        )}\n\n        {/* 右侧边栏 - AI助手 (Cursor风格) */}\n        <div \n          className={`bg-white border-l border-gray-200 flex flex-col ${\n            isRightSidebarCollapsed ? 'w-14' : ''\n          } ${isResizing ? '' : 'transition-all duration-300'}`}\n          style={{ width: isRightSidebarCollapsed ? undefined : `${rightSidebarWidth}px` }}\n        >\n          {!isRightSidebarCollapsed && (\n            <div className=\"flex-1 overflow-hidden\">\n              <AIChat \n                initialMessages={generateInitialMessages()}\n                onSendMessage={handleSendMessage}\n                onClose={() => setIsRightSidebarCollapsed(true)}\n              />\n            </div>\n          )}\n          \n          {isRightSidebarCollapsed && (\n            <div className=\"h-full flex flex-col items-center pt-4\">\n              <button \n                className=\"text-blue-600 hover:text-blue-800\"\n                onClick={() => setIsRightSidebarCollapsed(false)}\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\" />\n                </svg>\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* 命令面板 */}\n      <CommandPalette \n        isOpen={isCommandPaletteOpen}\n        onClose={() => setIsCommandPaletteOpen(false)}\n        commands={commands}\n      />\n    </div>\n  );\n};\n\nexport default WorkspacePage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}