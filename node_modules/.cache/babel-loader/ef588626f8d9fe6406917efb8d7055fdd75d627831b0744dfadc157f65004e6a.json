{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{Button}from'../../../shared/ui/button';import{Textarea}from'../../../shared/ui/textarea';import{t}from'../../../lib/i18n';import{motion}from'framer-motion';import{cn}from'../../../lib/utils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const AnswerInput=_ref=>{let{onSubmit,isDisabled,question,isStreamingQuestion,lang}=_ref;const[answer,setAnswer]=useState('');const textareaRef=useRef(null);// Focus the textarea when a new question appears\nuseEffect(()=>{if(question&&!isStreamingQuestion&&textareaRef.current){textareaRef.current.focus();}},[question,isStreamingQuestion]);const handleSubmit=()=>{if(answer.trim()&&!isDisabled){onSubmit(answer.trim());setAnswer('');}};const handleKeyDown=e=>{// Submit on Enter without Shift key\nif(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSubmit();}};// Animation variants\nconst containerVariants={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:0.3,ease:\"easeOut\"}}};// Show the input only when we have a question and it's not being streamed\nconst showInput=question&&!isStreamingQuestion;return/*#__PURE__*/_jsx(motion.div,{initial:\"hidden\",animate:showInput?\"visible\":\"hidden\",variants:containerVariants,className:cn(\"bg-background rounded-lg p-4 border border-border shadow-sm\",\"transition-all duration-300\",{\"opacity-50\":isDisabled}),children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(Textarea,{ref:textareaRef,value:answer,onChange:e=>setAnswer(e.target.value),onKeyDown:handleKeyDown,placeholder:t('clarify.answerPlaceholder',lang),className:\"min-h-[100px] resize-none\",disabled:isDisabled||!showInput,\"aria-label\":t('clarify.answerPlaceholder',lang)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-muted-foreground\",children:t('clarify.enterToSubmit',lang)}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,disabled:isDisabled||!answer.trim()||!showInput,\"aria-label\":t('clarify.continue',lang),children:t('clarify.continue',lang)})]})]})});};","map":{"version":3,"names":["React","useState","useRef","useEffect","Button","Textarea","t","motion","cn","jsx","_jsx","jsxs","_jsxs","AnswerInput","_ref","onSubmit","isDisabled","question","isStreamingQuestion","lang","answer","setAnswer","textareaRef","current","focus","handleSubmit","trim","handleKeyDown","e","key","shiftKey","preventDefault","containerVariants","hidden","opacity","y","visible","transition","duration","ease","showInput","div","initial","animate","variants","className","children","ref","value","onChange","target","onKeyDown","placeholder","disabled","onClick"],"sources":["/home/devbox/project/src/features/clarification/components/answer-input.tsx"],"sourcesContent":["import React, { useState, KeyboardEvent, useRef, useEffect, ChangeEvent } from 'react';\nimport { Button } from '../../../shared/ui/button';\nimport { Textarea } from '../../../shared/ui/textarea';\nimport { t } from '../../../lib/i18n';\nimport { Language } from '../../../lib/i18n';\nimport { motion } from 'framer-motion';\nimport { cn } from '../../../lib/utils';\nimport { Question } from '../types';\n\ninterface AnswerInputProps {\n  onSubmit: (answer: string) => void;\n  isDisabled: boolean;\n  question: Question | null;\n  isStreamingQuestion: boolean;\n  lang: Language;\n}\n\nexport const AnswerInput: React.FC<AnswerInputProps> = ({\n  onSubmit,\n  isDisabled,\n  question,\n  isStreamingQuestion,\n  lang\n}) => {\n  const [answer, setAnswer] = useState('');\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  \n  // Focus the textarea when a new question appears\n  useEffect(() => {\n    if (question && !isStreamingQuestion && textareaRef.current) {\n      textareaRef.current.focus();\n    }\n  }, [question, isStreamingQuestion]);\n  \n  const handleSubmit = () => {\n    if (answer.trim() && !isDisabled) {\n      onSubmit(answer.trim());\n      setAnswer('');\n    }\n  };\n  \n  const handleKeyDown = (e: KeyboardEvent<HTMLTextAreaElement>) => {\n    // Submit on Enter without Shift key\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit();\n    }\n  };\n  \n  // Animation variants\n  const containerVariants = {\n    hidden: { opacity: 0, y: 20 },\n    visible: { \n      opacity: 1, \n      y: 0, \n      transition: { \n        duration: 0.3,\n        ease: \"easeOut\"\n      }\n    }\n  };\n  \n  // Show the input only when we have a question and it's not being streamed\n  const showInput = question && !isStreamingQuestion;\n  \n  return (\n    <motion.div\n      initial=\"hidden\"\n      animate={showInput ? \"visible\" : \"hidden\"}\n      variants={containerVariants}\n      className={cn(\n        \"bg-background rounded-lg p-4 border border-border shadow-sm\",\n        \"transition-all duration-300\",\n        { \"opacity-50\": isDisabled }\n      )}\n    >\n      <div className=\"space-y-4\">\n        <Textarea\n          ref={textareaRef}\n          value={answer}\n          onChange={(e: ChangeEvent<HTMLTextAreaElement>) => setAnswer(e.target.value)}\n          onKeyDown={handleKeyDown}\n          placeholder={t('clarify.answerPlaceholder', lang)}\n          className=\"min-h-[100px] resize-none\"\n          disabled={isDisabled || !showInput}\n          aria-label={t('clarify.answerPlaceholder', lang)}\n        />\n        \n        <div className=\"flex justify-between items-center\">\n          <span className=\"text-sm text-muted-foreground\">\n            {t('clarify.enterToSubmit', lang)}\n          </span>\n          \n          <Button \n            onClick={handleSubmit}\n            disabled={isDisabled || !answer.trim() || !showInput}\n            aria-label={t('clarify.continue', lang)}\n          >\n            {t('clarify.continue', lang)}\n          </Button>\n        </div>\n      </div>\n    </motion.div>\n  );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}